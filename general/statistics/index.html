<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Application Statistics</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/assets/vendor/prettify/prettify.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheet.css" media="screen">

    <script src="/assets/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/base64.js" type="text/javascript"></script>

    <script src="/assets/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="//cdn.ably.io/lib/ably.min.js" type="text/javascript"></script>

    <script src="/assets/javascripts/application.js" type="text/javascript"></script>
    <script src="/assets/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.7.5">
  </head>
  <body>
    <div class="canonical-notice">
      <img src="/assets/icon-alert.png">
      <span class="canonical-notice-text">
        You are viewing our bleeding edge unstable documentation. We recommend you use of our <a href="https://www.ably.io/documentation">stable documentation Â»</a>
      </span>
      <img src="/assets/icon-alert.png">
    </div>
    <div class="fork-banner"><a href="https://github.com/ably/docs"><img src="/assets/forkme.png" alt="Fork me on GitHub"></a></div>

  <div id="documentation">
    
    <header>
      
      
        <h1 id="title">Application Statistics</h1>
      
    </header>
    <article>
      <p>The Ably system can be queried to obtain usage statistics for a given application, and results are provided aggregated across all channels in use in the application in the specified period. Stats may be used to track usage against account quotas.  The details on how to retrieve statistics are available in the <a href="/rest-api#stats">REST API documentation</a>, <a href="/realtime/statistics">Realtime client library statistics documentation</a> and <a href="/rest/statistics">REST client library statistics documentation</a>.</p>
<p>Statistics returned from the API are sparse; this means that if a metric object such as a message count <code>{ count: [val], data: val }</code> is empty or contains only zero values for all key value pairs, then the metric will be omitted completely from the JSON response.  This reduces the size of the JSON significantly and thus improves performance.</p>
<h3>Complete stats example containing all possible metrics</h3>
<p>Example request:</p>
<pre lang="sh"><code lang="sh">curl https://rest.ably.io/stats?unit=hour \
 -u "{{API_KEY}}"</code></pre>
<p>Example response:</p>
<pre lang="json"><code lang="json">[
  {
    "all": {          // aggregates inbound and outbound messages
      "messages": {     // messages published on channels
        "count": 22,      // count of messages
        "data": 308       // total data in bytes
      },
      "presence": {     // presence events such as enter/leave
        "count": 41,      // count of presence events
        "data": 2873      // total data in bytes for presence events
      },
      "all": {          // aggregataed messages and presence
        "count": 63,      // count of all
        "data": 3181      // total bytes for all
      }
    },
    "inbound": {      // all inbound messages i.e. received by Ably from clients
      "realtime": {     // received over realtime socket connection
        "messages": {     // messages published on channels
          "count": 0,       // count of messages
          "data": 0         // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 4,       // count of presence events
          "data": 676       // total data in bytes for presence events
        },
        "all": {          // aggregated channel messages + presence
          "count": 4,       // count of all
          "data": 676       // total bytes for all
        }
      },
      "rest": {         // received via the HTTP REST API
        "messages": {     // messages published on channels
          "count": 5,       // count of messages
          "data": 70        // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 2,       // count of presence events
          "data": 20        // total data in bytes for presence events
        },
        "all": {          // channel messages + presence
          "count": 5,       // count of all
          "data": 70        // total bytes for all
        }
      },
      "all": {          // aggregates all inbound realtime and REST messages
        "messages": {     // messages published on channels
          "count": 5,       // count of messages
          "data": 70        // total data in bytes
        },
        "presence": {   // presence events such as enter/leave
          "count": 6,     // count of presence events
          "data": 696     // total data in bytes for presence events
        },
        "all": {        // aggregated channel messages + presence
          "count": 11,     // count of all
          "data": 766     // total bytes for all
        }
      }
    },
    "outbound": {     // all outbound messages i.e. sent from Ably to clients
      "realtime": {     // sent over realtime socket connection
        "messages": {     // messages published on channels
          "count": 17,      // count of messages
          "data": 2873      // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 37,      // count of presence events
          "data": 2197      // total data in bytes for presence events
        },
        "all": {          // aggregated channel messages + presence
          "count": 54,      // count of all
          "data": 2435      // total bytes for all
        }
      },
      "rest": {         // retrieved using REST history API
        "messages": {     // messages on channels
          "count": 2,       // count of messages
          "data": 20         // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 4,       // count of presence events
          "data": 40         // total data in bytes for presence events
        },
        "all": {          // aggregated channel messages + presence
          "count": 6,       // count of all
          "data": 60         // total bytes for all
        }
      },
      "webhook": {      // messages pushed to customer's servers via WebHooks
        "messages": {     // messages published on channels
          "count": 1,       // count of messages
          "data": 10         // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 2,       // count of presence events
          "data": 20         // total data in bytes for presence events
        },
        "all": {          // aggregated channel messages + presence
          "count": 3,       // count of all
          "data": 30         // total bytes for all
        }
      },
      "all": {          // aggregates all outbound realtime, REST and WebHook messages
        "messages": {     // messages published on channels
          "count": 30,      // count of messages
          "data": 268       // total data in bytes
        },
        "presence": {     // presence events such as enter/leave
          "count": 42,      // count of presence events
          "data": 2257      // total data in bytes for presence events
        },
        "all": {          // aggregated channel messages + presence
          "count": 63,      // count of all
          "data": 2525      // total bytes for all
        }
      }
    },
    "persisted": {    // all message types persisted based on configured channel rules
      "messages": {     // messages persisted on channels
        "count": 5,       // count of messages
        "data": 70        // total data in bytes
      },
      "presence": {     // presence events persisted for states such as enter/leave
        "count": 8,       // count of presence events
        "data": 676       // total data in bytes for presence events
      },
      "all": {          // aggregated channel messages + presence persisted
        "count": 13,      // count of all
        "data": 746       // total bytes for all
      }
    },
    "connections": {  // connection statistics for this time period
      "plain": {        // non-TLS unencrypted connections
        "peak": 4,        // peak concurrent connections for this period
        "min": 0,         // minimum concurrent connections in this period
        "mean": 2,        // average concurrent connections in this period
        "opened": 6,      // count of new connections in this period
        "refused": 0      // count of connections refused by Ably in this period
      },
      "tls": {          // TLS encrypted connections
        "peak": 2,        // peak concurrent connections for this period
        "min": 2,         // minimum concurrent connections in this period
        "mean": 2,        // average concurrent connections in this period
        "opened": 2,      // count of new connections in this period
        "refused": 0      // count of connections refused by Ably in this period
      },
      "all": {          // aggregated summary of all connection types
        "peak": 6,        // peak concurrent connections for this period
        "min": 2,         // minimum concurrent connections in this period
        "mean": 4,        // average concurrent connections in this period
        "opened": 8,      // count of new connections in this period
        "refused": 0      // count of connections refused by Ably in this period
      }
    },
    "channels": {     // channel statistics for this time period
      "peak": 2,        // peak number of channels active for this period
      "min": 0,         // min number of channels active for this period
      "mean": 0,        // average number of channels active for this period
      "opened": 0,      // total number of channels opened in this period
      "refused": 0      // number of channel attach requests failed because of permissions
    },
    "apiRequests": {  // API requests made via the REST API excluding tokens
      "succeeded": 11,  // successful requests
      "failed": 0,      // failed requests
      "refused": 0      // requests refused as a result of exceeding account limits
    },
    "tokenRequests": { // token requests via the REST API
      "succeeded": 9,   // successful tokens issued
      "failed": 0,      // failed token request
      "refused": 0      // requests refused due to permissions or rate limiting
    },
    "inProgress": "2015-03-16:10:57", // last sub-interval included in this statistic
    "count": 116,     // number of lower-level stats used to aggregate these results
    "unit": "hour",   // unit of time for these stats from the intervalId forwards
    "intervalId": "2015-03-16:10" // time period for stats in format yyyy-mm-dd:hh:mm:ss
  }
]</code></pre>
<h3>Sparse stats example containing present metrics</h3>
<p>Example request:</p>
<pre lang="sh"><code lang="sh">curl https://rest.ably.io/stats?unit=minute \
 -u "{{API_KEY}}"</code></pre>
<p>Example response:</p>
<pre lang="json"><code lang="json">[
  {
    "all": {
      "messages": {
        "count": 1,
        "data": 50
      }
      "all": {
        "count": 1,
        "data": 50
      }
    },
    "inbound": {
      "rest": {
        "messages": {
          "count": 1,
          "data": 50
        },
        "all": {
          "count": 1,
          "data": 50
        }
      },
      "all": {
        "messages": {
          "count": 1,
          "data": 50
        },
        "all": {
          "count": 1,
          "data": 50
        }
      }
    },
    "count": 0,
    "unit": "minute",
    "intervalId": "2015-03-26:01:11"
  }
]</code></pre>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/assets/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/how-ably-works/'>How Ably works</a></li>
</ul>
  <h2><a href="/realtime/">Realtime client lib</a></h2>
<ul>
<li class=''><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
<li class=''><a href='/realtime/types/'>Types</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Using the REST library</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2>General</h2>
<ul>
<li class=''><a href='/general/authentication/'>Authentication</a></li>
<li class=''><a href='/general/channel-rules-namespaces/'>Channel Rules and Namespaces</a></li>
<li class=''><a href='/general/webhooks/'>Receiving Webhooks</a></li>
<li class='selected'><a href='/general/statistics/'>Application Statistics</a></li>
<li class=''><a href='/general/migrating/'>Migrating to Ably</a></li>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/features/'>Features spec v0.8</a></li>
<li class=''><a href='/client-lib-development-guide/feature-prioritisation/'>Feature prioritisation</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/rest-api/'>REST API Definition</a></li>
<li class=''><a href='/client-lib-development-guide/test-api/'>Sandbox Test API</a></li>
<li class=''><a href='/client-lib-development-guide/encryption/'>Encryption</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/connection-fallback/'>Connection host fallback</a></li>
<li class=''><a href='/client-lib-development-guide/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
<li class=''><a href='/code-index/'>Code Examples List</a></li>
</ul>
  <ul>
<li><a href="https://www.ably.io">Visit Ably.io</a></li>
</ul>
</div>

</body>
</html>
