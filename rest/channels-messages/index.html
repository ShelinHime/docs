<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Channels & Messages</title>
    <link rel="stylesheet" type="text/css" href="/assets/stylesheet.css" media="screen">
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <script src="/assets/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="/assets/vendor/prettify/prettify.css" media="screen">
    <script src="/assets/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="/assets/javascripts/application.js" type="text/javascript"></script>
    <script src="/assets/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.4.3">
  </head>
  <body>
    <a href="https://github.com/ably/docs"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/assets/forkme.png" alt="Fork me on GitHub"></a>
  <div id="documentation">
    
      <nav class="jump-to-nav">
        <div class="form">
          <select id="jump-to-nav">
            <option>Jump to ...</option>
            <optgroup label='Help with'>
<option id="anchor-help-join">Joining a channel</option>
<option id="anchor-help-publish">Publishing messages</option>
</optgroup>
<optgroup label='API Reference'>
<option id="anchor-channel-object">Channel object</option>
<option id="anchor-publish">publish</option>
<option id="anchor-history">history</option>
<option id="anchor-stats">stats</option>
<option id="anchor-presence">presence</option>
</optgroup>
          </select>
        </div>
      </nav>
    
    <header>
      
        <div class="breadcrumb"><a href="/rest/">REST Client Library</a><span class="separator">/</span></div>
      
      
        <h1 id="title">Channels &amp; Messages</h1>
      
    </header>
    <article>
      <h2 id="help-join">Joining a channel</h2>
<p>In the REST client library, a <code>Channel</code> object must be obtained in order to publish messages on that channel, or access the channel methods or classes:</p>
<pre lang="nodejs"><code lang="nodejs">var Rest = new Ably.Rest(options),
    channel = Rest.channels.get('channel0');</code></pre>
<pre lang="ruby"><code lang="ruby">rest = Ably::Rest.new(options)
channel = rest.channels.get('channel0')</code></pre>
<pre lang="java"><code lang="java">Rest rest = new Ably.Rest(options);
Channel channel = rest.channels.get('channel0');</code></pre>
<p>A shortcut method is also provided to retrieve a <code>Channel</code>:</p>
<pre lang="nodejs"><code lang="nodejs">var channel = Rest.channel('channel0');</code></pre>
<pre lang="ruby"><code lang="ruby">channel = Rest.channel('channel0')</code></pre>
<pre lang="java"><code lang="java">Channel channel = Rest.channel("channel0");</code></pre>
<h2 id="help-publish">Publishing messages</h2>
<p>Publishing a message to a channel requires an event identifier for the message and an arbitrary payload.  Payloads can be either a primitive serializable data type, or a binary object.  If a message could not be delivered successfully, then an error will be returned.</p>
<pre lang="nodejs"><code lang="nodejs">var channel = Rest.channel('channel0');
channel.publish('announcement', { message: 'Luke has arrived'});</code></pre>
<pre lang="ruby"><code lang="ruby">channel = Rest.channel('channel0')
channel.publish 'announcement', { message: 'Luke has arrived'}</code></pre>
<pre lang="java"><code lang="java">Channel channel = Rest.channel("channel0");
channel.publish('announcement', { message: 'Luke has arrived'});</code></pre>
<p>The channel-specific calls in the client library directly mirror the <a href="/rest-api">REST API</a>.</p>
<h1>API Reference</h1>
<div class="inline-toc">
<ul><li>Channel object reference
<ul>
<li>
Methods
<ul>
<li><a href='#publish'>Publish</a></li>
<li><a href='#history'>History</a></li>
<li><a href='#stats'>Stats</a></li>
<li><a href='#presence'>Presence</a></li>
</ul>
</li>
</ul>
</li></ul>
</div><h2 id="channel-object">Channel Object Reference</h2>
<p>The Channel object is is created by getting a channel from the <a href="/rest/usage#constructor">@Ably object</a> channels class.</p>
<h3>Methods</h3>
<h6 id="publish">publish</h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>channel.publish(event, data, callback)</span><span lang='ruby'>channel.publish(event, data) → success</span><span lang='java'>channel.publish(String event, Object data) → Boolean success</span></p>
</blockquote>
<p>This call queries the REST <a href="/rest-api/#publish"><code>/apps/&lt;app id&gt;/channels/&lt;channel id&gt;/publish</code></a> API.</p>
<h4>Parameters</h4>
<dl>
	<dt>event</dt>
	<dd>the name of the event to publish</dd>
	<dt>data</dt>
	<dd>the message payload</dd>
	<dt><div lang="nodejs">callback</div></dt>
	<dd>is a function of the form: <code>callback(err, result)</code><br />
where:<br />
<ul><br />
<li><code>err</code> contains an error value on the case of an error response as defined in the <a href="/rest-api/#common">REST API</a> documentation</li><br />
<li>On success, <code>result</code> contains the object returned in the response body, which may be empty.</li><br />
</ul></dd>
</dl>
<div lang="ruby,java">
<h4>Returns</h4>
<p>Returns <code>true</code> if successful.  Failure to publish will raise an exception &#8211; typical publishing exceptions include:</p>
<div lang="ruby">
<ul>
	<li><code>Ably::NetworkUnavailableException</code></li>
	<li><code>Ably::QuotaExceededException</code></li>
	<li><code>Ably::AuthenticationFailureException</code><br />
  </div><div lang="java"></li>
</ul>
<ul>
	<li><code>Ably.NetworkUnavailableException</code></li>
	<li><code>Ably.QuotaExceededException</code></li>
	<li><code>Ably.AuthenticationFailureException</code><br />
  </div></li>
</ul>
</div>
<h6 id="history">history</h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>channel.history(options, callback)</span><span lang='ruby'>channel.history(options) → json_result</span><span lang='java'>channel.history(OptionsHash options) → JSONResult</span></p>
</blockquote>
<p>This call queries the REST <a href="/rest-api/#channel-history"><code>/apps/&lt;app id&gt;/channels/&lt;channel id&gt;/history</code></a> API.</p>
<h4>Parameters</h4>
<dl>
	<dt>options</dt>
	<dd>an optional object containing the query parameters, as specified in the <a href="/rest-api/#channel-history">REST API</a>.</dd>
	<dt><div lang="nodejs">callback</div></dt>
	<dd>is a function of the form: <code>callback(err, result)</code><br />
where:<br />
<ul><br />
<li><code>err</code> contains an error value on the case of an error response as defined in the <a href="/rest-api/#common">REST API</a> documentation</li><br />
<li>On success, <code>result</code> contains an array of results whose type corresponds to the result type for the request granularity as specified in <a href="/rest-api/#channel-history">REST API</a>.<br />
  Example <code>result</code>:<br />
  <pre lang="json"><code>[{
    "name": "&lt;event name&gt;",
    "channel": "&lt;channel id&gt;",
    "data": "&lt;message payload&gt;",
    "timestamp": "&lt;message timestamp&gt;"
  }]</code></pre><br />
</li><br />
</ul></dd>
</dl>
<div lang="ruby,java">
<h4>Returns</h4>
<p>On success, <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span> contains an array of results whose type corresponds to the result type for the request granularity as specified in <a href="/rest-api/#channel-history">REST API</a>.</p>
<p>Example <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span>:</p>
<pre lang="json"><code lang="json">[{
  "name": "&lt;event name&gt;",
  "channel": "&lt;channel id&gt;",
  "data": "&lt;message payload&gt;",
  "timestamp": "&lt;message timestamp&gt;"
}]</code></pre>
<p>Failure to retrieve the history will raise an exception &#8211; typical exceptions include:<br />
  <div lang="ruby"></p>
<ul>
	<li><code>Ably::NetworkUnavailableException</code></li>
	<li><code>Ably::QuotaExceededException</code></li>
	<li><code>Ably::AuthenticationFailureException</code><br />
  </div><div lang="java"></li>
</ul>
<ul>
	<li><code>Ably.NetworkUnavailableException</code></li>
	<li><code>Ably.QuotaExceededException</code></li>
	<li><code>Ably.AuthenticationFailureException</code><br />
  </div></li>
</ul>
</div>
<h6 id="stats">stats</h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>channel.stats(options, callback)</span><span lang='ruby'>channel.stats(options) → json_result</span><span lang='java'>channel.stats(OptionsHash options) → JSONResult</span></p>
</blockquote>
<p>This call queries the REST <a href="/rest-api/#channel-stats"><code>/apps/&lt;app id&gt;/channels/&lt;channel id&gt;/stats</code></a> API.</p>
<h4>Parameters</h4>
<dl>
	<dt>options</dt>
	<dd>an optional object containing the query parameters, as specified in the <a href="/rest-api/#channel-stats">REST API</a>.</dd>
	<dt><div lang="nodejs">callback</div></dt>
	<dd>is a function of the form: <code>callback(err, result)</code><br />
where:<br />
<ul><br />
<li><code>err</code> contains an error value on the case of an error response as defined in the <a href="/rest-api/#common">REST API</a> documentation</li><br />
<li>On success, <code>result</code> contains an array of results whose type corresponds to the result type for the request granularity as specified in <a href="/rest-api/#channel-stats">REST API</a>.<br />
  Example <code>result</code>:<br />
  <pre lang="json"><code>[{
    "an example": "&lt;needs to be inserted here&gt;",
    "illustrating": "&lt;a simple stats result&gt;"
  }]</code></pre><br />
</li><br />
</ul></dd>
</dl>
<div lang="ruby,java">
<h4>Returns</h4>
<p>On success, <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span> contains an array of statistics for the request granularity as specified in <a href="/rest-api/#channel-stats">REST API</a>.</p>
<p>Example <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span>:</p>
<pre lang="json"><code lang="json">[{
    "an example": "&lt;needs to be inserted here&gt;",
    "illustrating": "&lt;a simple stats result&gt;"
  }]</code></pre>
<p>Failure to retrieve the stats will raise an exception &#8211; typical exceptions include:<br />
  <div lang="ruby"></p>
<ul>
	<li><code>Ably::NetworkUnavailableException</code></li>
	<li><code>Ably::QuotaExceededException</code></li>
	<li><code>Ably::AuthenticationFailureException</code><br />
  </div><div lang="java"></li>
</ul>
<ul>
	<li><code>Ably.NetworkUnavailableException</code></li>
	<li><code>Ably.QuotaExceededException</code></li>
	<li><code>Ably.AuthenticationFailureException</code><br />
  </div></li>
</ul>
</div>
<h6 id="presence">presence</h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>channel.presence(options, callback)</span><span lang='ruby'>channel.presence(options) → json_result</span><span lang='java'>channel.presence(OptionsHash options) → JSONResult</span></p>
</blockquote>
<p>This call queries the REST <a href="/rest-api/#channel-presence"><code>/apps/&lt;app id&gt;/channels/&lt;channel id&gt;/presence</code></a> API.</p>
<h4>Parameters</h4>
<dl>
	<dt>options</dt>
	<dd>an optional object containing the query parameters, as specified in the <a href="/rest-api/#channel-presence">REST API</a>.</dd>
	<dt><div lang="nodejs">callback</div></dt>
	<dd>is a function of the form: <code>callback(err, result)</code><br />
where:<br />
<ul><br />
<li><code>err</code> contains an error value on the case of an error response as defined in the <a href="/rest-api/#common">REST API</a> documentation</li><br />
<li>On success, <code>result</code> contains an array of results whose type corresponds to the result type for the request granularity as specified in <a href="/rest-api/#channel-presence">REST API</a>.<br />
  Example <code>result</code>:<br />
  <pre lang="json"><code>[{
    "an example": "&lt;needs to be inserted here&gt;",
    "illustrating": "&lt;a simple presence result&gt;"
  }]</code></pre><br />
</li><br />
</ul></dd>
</dl>
<div lang="ruby,java">
<h4>Returns</h4>
<p>On success, <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span> contains an array representing each client present on the channel as specified in <a href="/rest-api/#channel-presence">REST API</a>.</p>
<p>Example <span lang="ruby"><code>json_result</code></span><span lang="java"><code>JSONResult</code></span>:</p>
<pre lang="json"><code lang="json">[{
    "an example": "&lt;needs to be inserted here&gt;",
    "illustrating": "&lt;a simple presence result&gt;"
  }]</code></pre>
<p>Failure to retrieve the presence will raise an exception &#8211; typical exceptions include:<br />
  <div lang="ruby"></p>
<ul>
	<li><code>Ably::NetworkUnavailableException</code></li>
	<li><code>Ably::QuotaExceededException</code></li>
	<li><code>Ably::AuthenticationFailureException</code><br />
  </div><div lang="java"></li>
</ul>
<ul>
	<li><code>Ably.NetworkUnavailableException</code></li>
	<li><code>Ably.QuotaExceededException</code></li>
	<li><code>Ably.AuthenticationFailureException</code><br />
  </div></li>
</ul>
</div>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/assets/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/root/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/root/how-ably-works/'>How Ably works</a></li>
<li class=''><a href='/root/usage-limits-billing/'>Usage Limits &amp; Billing</a></li>
</ul>
  <h2><a href="/realtime/">Real-time client lib</a></h2>
<ul>
<li class=''><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Usage</a></li>
<li class='selected'><a href='/rest/channels-messages/'>Channels &amp; Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/other/client-lib-developer/'>Notes (To be deleted)</a></li>
</ul>
  <h2>Other</h2>
<ul>
<li class=''><a href='/other/authentication/'>Authentication</a></li>
<li class=''><a href='/other/webhooks/'>Receiving Webhooks</a></li>
</ul>
  <ul>
<li class=''><a href='/other/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
<li><a href="https://ably.io">Visit Ably.io</a></li>
</ul>
</div>
</body>
</html>
