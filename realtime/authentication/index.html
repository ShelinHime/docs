<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Authentication</title>
    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/vendor/prettify/prettify.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheet.css" media="screen">

    <script src="/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>
    <script src="/vendor/javascripts/base64.js" type="text/javascript"></script>

    <script src="/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="//cdn.ably.io/lib/ably.min.js" type="text/javascript"></script>

    <script src="/javascripts/application.js" type="text/javascript"></script>
    <script src="/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.7.5">
  </head>
  <body>
    <div class="canonical-notice">
      <img src="/images/icon-alert.png">
      <span class="canonical-notice-text">
        You are viewing our bleeding edge unstable documentation. We recommend you use of our <a href="https://www.ably.io/documentation">stable documentation Â»</a>
      </span>
      <img src="/images/icon-alert.png">
    </div>
    <div class="fork-banner"><a href="https://github.com/ably/docs"><img src="/images/forkme.png" alt="Fork me on GitHub"></a></div>

  <div id="documentation">
    
      <nav class="jump-to-nav">
        <div class="form">
          <select id="jump-to-nav">
            <option>Jump to ...</option>
            <optgroup label='Help with'>
<option id="anchor-understanding-auth">Understanding Auth</option>
<option id="anchor-basic-authentication">Basic Authentication</option>
<option id="anchor-token-authentication">Token Authentication</option>
<option id="anchor-auth-object">Auth object</option>
<option id="anchor-identified-clients">Identified clients</option>
</optgroup>
<optgroup label='Channel API properties'>
<option id="anchor-client-id">clientId</option>
</optgroup>
<optgroup label='Channel API methods'>
<option id="anchor-authorise">authorise</option>
<option id="anchor-create-token-request">createTokenRequest</option>
<option id="anchor-request-token">requestToken</option>
</optgroup>
          </select>
        </div>
      </nav>
    
    <header>
      
        <div class="breadcrumb"><a href="/realtime/">Realtime Client Library API</a><span class="separator">/</span></div>
      
      
        <h1 id="title">Authentication</h1>
      
    </header>
    <article>
      <p>Ably clients can authenticate with Ably using <a href="/general/authentication#basic-authentication">Basic Authentication</a>, which uses the customer&#8217;s <a href="https://support.ably.io/solution/articles/3000030054-what-is-an-app-api-key">API key</a>, and <a href="/general/authentication#token-authentication">Token Authentication</a>, which relies on a token customers obtain from Ably, or a token request that customers sign and issue to their clients. <a href="/general/authentication#token-authentication">Token Authentication</a>, in most cases, is the recommended strategy as it provides robust access control and stringent security measures.</p>
<h2 id="understanding-auth">Understanding the Ably authentication schemes</h2>
<p>This page of documentation is intended to describe the Realtime Authentication API and is not intended to explain in depth how Ably&#8217;s authentication works. If you are new to Ably and/or the authentication schemes, we strongly recommend that you get acquainted with the following first:</p>
<ul>
	<li><a href="/general/authentication/#getting-started">Getting started with Ably&#8217;s authentication</a></li>
	<li><a href="/general/authentication/#select-auth">Selecting the rigth authentication scheme</a></li>
	<li><a href="/general/authentication/#basic-authentication">Basic Authentication explained</a></li>
	<li><a href="/general/authentication/#token-authentication">Token Authentication explained</a></li>
</ul>
<h3 id="basic-authentication">Basic Authentication</h3>
<p><strong>Basic Authentication</strong> directly uses one of the <a href="https://support.ably.io/solution/articles/3000030054-what-is-an-app-api-key">api keys</a> <a href="https://support.ably.io/support/solutions/articles/3000030502-setting-up-and-managing-api-keys">configured via the application dashboard</a>. Basic Authentication is the simplest method to use but has some important limitations described in detail in the <a href="/general/authentication/#basic-authentication">Basic Authentication documentation</a>.</p>
<p>Here is a straightfoward example of using Basic Authentication to connect to Ably:</p>
<pre class="code-editor open-jsbin open-jsbin-aredoz" lang="javascript"><code class="code-editor open-jsbin open-jsbin-aredoz" lang="javascript">var realtime = new Ably.Realtime({ key: '{{API_KEY}}' });</code></pre>
<pre class="code-editor open-jsbin open-jsbin-aredoz" lang="nodejs"><code class="code-editor open-jsbin open-jsbin-aredoz" lang="nodejs">var realtime = new Ably.Realtime({ key: '{{API_KEY}}' });</code></pre>
<pre lang="ruby"><code lang="ruby">realtime = Ably::Realtime.new(key: '{{API_KEY}}')</code></pre>
<pre lang="java"><code lang="java">ClientOptions options = new ClientOptions();
options.key = "{{API_KEY}}";
AblyRealtime realtime = new AblyRealtime(options);</code></pre>
<h3 id="token-authentication">Token Authentication</h3>
<p><strong>Token Authentication</strong> uses a token obtained via the REST API <a href="#requesttoken"><code>requestToken</code></a> endpoint. Tokens are authentication tokens that only have a short lifetime, and therefore they may more readily be distributed to clients where there is a risk of compromise. Tokens may also be issued with a particular scope &#8211; such as a limited set of access rights, or being limited to use by a specific client &#8211; and therefore token-based authentication provides the flexibility to implement access control policies in the application. See the <a href="/general/authentication#token-authentication">Token Authentication documentation</a> for more details.</p>
<p>The <a href="/realtime/usage#constructor">Realtime</a> library will typically be instanced with a means to obtain a token as opposed to a token itself so that when the token expires, the library can assume responsibility to automatically obtain a new token and seamlessly continue operations with Ably. Conversely, if a library is instanced with a previously obtained <a href="#token-details"><code>Token</code></a> by setting the <span lang="ruby"><code>:token</code> or <code>:token_details</code></span><span lang="default"><code>token</code> or <code>tokenDetails</code></span> attributes of <a href="#client-options"><code>ClientOptions</code></a>, when the token expires, the client will be disconnected and enter the <code>FAILED</code> state as the library has no means to obtain a new token.  It is therefore recommended that all client libraries that rely on token authentication have a means to issue new tokens using either the <span lang="ruby"><a href="#client-options"><code>auth_url</code></a> or <a href="#client-options"><code>auth_callback</code></a></span><span lang="default"><a href="#client-options"><code>authUrl</code></a> or <a href="#client-options"><code>authCallback</code></a></span> attribute of <a href="#client-options"><code>ClientOptions</code></a> when instancing the library.</p>
<p>Here is a rather contrived, but straightfoward example of instancing a library using Token Authentication with a means to reissue tokens as required. Typically, in a browser environment, the <code>authUrl</code> provided would be a relative URL to a local endpoint that is used to issue tokens to trusted clients. Clients can be trusted based on session cookies, for example. For non-browser clients, an authentication callback is preferred thus relying on your application to communicate securely with your own servers to obtain a token.</p>
<pre class="code-editor open-jsbin open-jsbin-atusid" lang="javascript"><code class="code-editor open-jsbin open-jsbin-atusid" lang="javascript">var realtime = new Ably.Realtime({ authUrl: 'http://my.website/auth' });</code></pre>
<pre class="code-editor open-jsbin open-jsbin-atusid" lang="nodejs"><code class="code-editor open-jsbin open-jsbin-atusid" lang="nodejs">var realtime = new Ably.Realtime({ authUrl: 'http://my.website/auth' });</code></pre>
<pre lang="ruby"><code lang="ruby">realtime = Ably::Realtime.new(auth_url: 'http://my.website/auth')</code></pre>
<pre lang="java"><code lang="java">ClientOptions options = new ClientOptions();
options.authUrl = "http://my.website/auth";
AblyRealtime realtime = new AblyRealtime(options);</code></pre>
<h3 id="auth-object">Auth object</h3>
<p>The principal use-case for <code>Auth</code> object is to <a href="#create-token-request">create signed token request objects</a> or <a href="#request-token">obtain tokens from Ably</a>, and then issue them to other &#8220;less trusted&#8221; clients. Typically, your servers should be the only devices to have a <a href="https://support.ably.io/solution/articles/3000030054-what-is-an-app-api-key">private API key</a>, and this private API key is used to securely sign token requests or request tokens from Ably. Clients are then issued with these time-limited tokens or token requests and can use these to authenticate with Ably. If you adopt this model, the private API key is never shared with clients directly.</p>
<p>A subsidiary use-case for the <code>Auth</code> object is to preemptively trigger renewal of a token or to acquire a new token with a revised set of capabilities by explicitly calling <a href="#authorise"><code>authorise</code></a></p>
<h3 id="identified-clients">Identified clients</h3>
<p>When a client is authenticated and connected to Ably, they are considered to be an <strong>authenticated client</strong>. However, whilst an <strong>authenticated client</strong> has a verifiable means to authenticate with Ably, they do not necessarily have an identity. When a client is assigned a trusted identity, then they are considered an <strong>identified client</strong> and for all operations they perform with the Ably service, their <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> field will be automatically populated and can be trusted by other clients.</p>
<p>For example, assuming you were building a chat application and wanted to allow clients to publish messages and be present on a channel. If each client is assigned a trusted identity by your server, such as a unique email address or UUID, then all other clients can trust any messages or presence events they see in the channel as being from that user. No other users are permitted to assume a <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> that they are not assigned to in their token.</p>
<p>In Ably a client can be identified with a <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> in three ways:</p>
<ul>
	<li>if the client is authenticated with a token that is issued for that <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span>. See <span lang="ruby"><a href="#request-token"><code>request_token</code></a></span><span lang="default"><a href="#request-token"><code>requestToken</code></a></span> and <span lang="ruby"><a href="#create-token-request"><code>create_token_request</code></a></span><span lang="default"><a href="#create-token-request"><code>createTokenRequest</code></a></span> documentation below;</li>
	<li>if the client claims that <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> and is authenticated using <a href="#basic-authentication">Basic Authentication</a> (using an API key);</li>
	<li>if the client claims that <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> and is authenticated with a token that is issued for a <span lang="ruby"><a href="https://support.ably.io/solution/articles/3000048586-can-a-client-emulate-any-client-id-i-e-authenticate-using-a-wildcard-client-id">wildcard <code>client_id</code></a></span><span lang="default"><a href="https://support.ably.io/solution/articles/3000048586-can-a-client-emulate-any-client-id-i-e-authenticate-using-a-wildcard-client-id">wildcard <code>clientId</code></a></span> (a special token privilege that allows any client identity to be assumed)</li>
</ul>
<p>We encourage customers to always issue tokens to clients so that they authenticate using a token and do not have access to API keys. Since the customer can then control the <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> that may be used by any of its clients, all other clients can rely on the validity of the <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> in published messages and of members present in presence channels.</p>
<p>The following example demonstates how to issue a token with an explicit <span lang="ruby"><code>client_id</code></span><span lang="default"><code>clientId</code></span> that, when used by a client, will then be considered an <strong>identified client</strong>.</p>
<pre class="code-editor open-jsbin open-jsbin-ebaxid" lang="javascript"><code class="code-editor open-jsbin open-jsbin-ebaxid" lang="javascript">var realtime = new Ably.Realtime({ key: '{{API_KEY}}' });
realtime.auth.createTokenRequest({ clientId: 'Bob' }, function(err, tokenRequest) {
  /* ... issue the TokenRequest to a client ... */
})</code></pre>
<pre class="code-editor open-jsbin open-jsbin-ebaxid" lang="nodejs"><code class="code-editor open-jsbin open-jsbin-ebaxid" lang="nodejs">var realtime = new Ably.Realtime({ key: '{{API_KEY}}' });
realtime.auth.createTokenRequest({ clientId: 'Bob' }, function(err, tokenRequest) {
  /* ... issue the TokenRequest to a client ... */
})</code></pre>
<pre lang="ruby"><code lang="ruby">realtime = Ably::Realtime.new(key: '{{API_KEY}}')
realtime.auth.createTokenRequest(client_id: 'Bob') do |token_request|
  # ... issue the TokenRequest to a client ...
end</code></pre>
<pre lang="java"><code lang="java">ClientOptions options = new ClientOptions();
options.key = "{{API_KEY}}";
AblyRealtime realtime = new AblyRealtime(options);
TokenParams tokenParams = new TokenParams();
tokenParams.clientId = "Bob";
TokenRequest tokenRequest;
tokenRequest = realtime.auth.createTokenRequest(null, tokenParams);
/* ... issue the TokenRequest to a client ... */</code></pre>
<h1>Auth API Reference</h1>
<div class="inline-toc">
<ul><li>Auth reference
<ul>
<li>
Methods
<ul>
<li><a href='#authorise'>authorise</a></li>
<li><a href='#request-token'>requestToken</a></li>
<li><a href='#create-token-request'>createTokenRequest</a></li>
</ul>
</li>
<li>
Properties
<ul>
<li><a href='#client-id'>clientId</a></li>
</ul>
</li>
<li>
Related types
<ul>
<li><a href='#auth-options'>AuthOptions</a></li>
<li><a href='#token-params'>TokenParams</a></li>
<li><a href='#token-details'>TokenDetails</a></li>
</ul>
</li>
</ul>
</li></ul>
</div><p>The Auth object is available as the <span lang="java"><a href="/realtime/usage#auth"><code>auth</code> field</a></span><span lang="default"><a href="/realtime/usage#auth"><code>auth</code> property</a></span> of the <a href="/realtime/usage">Ably Realtime instance</a>.</p>
<h2 id="properties"><span lang='default'>Auth Properties</span><span lang='java'>io.ably.lib.rest.Auth Members</span><span lang='ruby'>Ably::Auth Attributes</span></h2>
<p>The <code>Auth</code> object exposes the following public <span lang="default">properties</span><span lang="ruby">attributes</span><span lang="java">members</span>:</p>
<h6 id="client-id"><span lang='default'>clientId</span><span lang='ruby'>client_id</span></h6>
<p>The client ID string, if any, configured for this client connection. See <a href="#identified-clients">identified clients</a> for more information on trusted client identifiers.</p>
<h2 id="methods"><span lang='default'>Auth Methods</span><span lang='java'>io.ably.lib.rest.Auth Methods</span><span lang='ruby'>Ably::Auth Methods</span></h2>
<h6 id="request-token"><span lang='default'>requestToken</span><span lang='ruby'>request_token</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='javascript,nodejs'>auth.requestToken(options, callback)</span><span lang='ruby'>auth.request_token(options) â json_result</span><span lang='java'>auth.requestToken(AuthOptions options, TokenParams params) â TokenDetails</span></p>
</blockquote>
<h6 lang="java" id="requesttoken">public TokenDetails requestToken(AuthOptions options, TokenParams params)</h6>
<p>Calls the <a href="/rest-api#requesttoken"><code>requestToken</code> API endpoint</a> to obtain a token according to the specified <span lang="default">options</span><span lang="java">authOptions and tokenParams</span>. If the request is successful the resulting <a href="#token-details">TokenDetails</a> instance <span lang="java">is returned</span><span lang="default">is passed back in the callback</span>. If the request is unsuccessful <span lang="java">an appropriate Exception is thrown</span><span lang="default">an appropriate error object is passed to the callback</span>.</p>
<pre lang="javascript"><code lang="javascript">client.auth.requestToken(options, function(err, tokenDetails){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token = ' + tokenDetails.id);
});</code></pre>
<pre lang="nodejs"><code lang="nodejs">client.auth.requestToken(options, function(err, tokenDetails){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token = ' + tokenDetails.id);
});</code></pre>
<pre lang="ruby"><code lang="ruby">begin
  token = client.auth.request_token(options)
  puts "Success; token = #{token[:id]}"
rescue AblyException =&gt; e
  warn e.message
end</code></pre>
<pre lang="java"><code lang="java">try {
  TokenDetails tokenDetails = client.auth.requestToken(authOptions, tokenParams);
  System.out.println("Success; token = " + tokenDetails.id);
} catch(AblyException e) {
  System.out.println("An error occurred; err = " + e.getMessage());
}</code></pre>
<h4>Parameters</h4>
<dl>
	<dt><div lang="default">options</div></dt>
	<dd>an optional object containing any <a href="#auth-options">AuthOptions</a> required to supplement or override the options given when instancing the library, plus any required <a href="#token-params">TokenParams</a> options.</dd>
	<dt><div lang="default">callback</div></dt>
	<dd>is a function of the form: <code>function(err, result)</code><br />
where:<br />
<ul><li><code>err</code> contains an error object containing the error details</li><br />
<li>On success, <code>result</code> contains the <a href="#token-details">TokenDetails</a> result.</li></ul></dd>
	<dt><div lang="java">AuthOptions authOptions</div></dt>
	<dd>An <a href="#auth-options">AuthOptions</a> instance containing any options to supplement or override the Options given when instancing the library.</dd>
</dl>
<dl>
	<dt><div lang="java">TokenParams tokenParams</div></dt>
	<dd>A <a href="#token-params">TokenParams</a> instance containing the specific parameters of the token request.</dd>
</dl>
<h6 id="authorise">authorise</h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>auth.authorise(options, callback)</span><span lang='ruby'>auth.authorise(options) â json_result</span><span lang='java'>auth.authorise(AuthOptions options, TokenParams params, boolean force) â TokenDetails</span></p>
</blockquote>
<p>Ensures valid auth credentials are present for the library instance. This may rely on an already-known and valid token, and will obtain a new token if necessary or explicitly requested via the <a href="/rest-api#requesttoken"><code>requestToken</code> API endpoint</a>.</p>
<p>In the event that a new token request is made, the specified <span lang="default">options</span><span lang="java">authOptions and tokenParams</span> are used. If the check or a subsequent request is successful the resulting <a href="#token-details">TokenDetails</a> instance <span lang="java">is returned</span><span lang="default">is passed back in the callback</span>. If the request is unsuccessful <span lang="java">an appropriate Exception is thrown</span><span lang="default">an appropriate error object is passed to the callback</span>.</p>
<pre lang="javascript"><code lang="javascript">client.auth.authorise(options, function(err, tokenDetails){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token = ' + tokenDetails.id);
});</code></pre>
<pre lang="nodejs"><code lang="nodejs">client.auth.authorise(options, function(err, tokenDetails){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token = ' + tokenDetails.id);
});</code></pre>
<pre lang="java"><code lang="java">try {
  TokenDetails tokenDetails = client.auth.authorise(authOptions, tokenParams, false);
  System.out.println("Success; token = " + tokenDetails.id);
} catch(AblyException e) {
  System.out.println("An error occurred; err = " + e.getMessage());
}</code></pre>
<h4>Parameters</h4>
<dl>
	<dt><div lang="default">options</div></dt>
	<dd>an optional object containing any <a href="#auth-options">AuthOptions</a> required to supplement or override the options given when instancing the library, plus any required <a href="#token-params">TokenParams</a> options. A further boolean <code>force</code> option is supported which indicates that a new token should be requested, even if a current token is still valid.</dd>
	<dt><div lang="default">callback</div></dt>
	<dd>is a function of the form: <code>function(err, result)</code><br />
where:<br />
<ul><li><code>err</code> contains an error object containing the error details</li><br />
<li>On success, <code>result</code> contains the <a href="#token-details">TokenDetails</a> result.</li></ul></dd>
	<dt><div lang="java">AuthOptions authOptions</div></dt>
	<dd>An <a href="#auth-options">AuthOptions</a> instance containing any options to supplement or override the Options given when instancing the library.</dd>
</dl>
<dl>
	<dt><div lang="java">TokenParams tokenParams</div></dt>
	<dd>A <a href="#token-params">TokenParams</a> instance containing the specific parameters of the token request.</dd>
</dl>
<dl>
	<dt><div lang="java">boolean force</div></dt>
	<dd>A boolean indicating that a new token should be requested, even if a current token is still valid.</dd>
</dl>
<h6 id="create-token-request"><span lang='default'>createTokenRequest</span><span lang='ruby'>create_token_request</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='nodejs'>auth.createTokenRequest(options, callback)</span><span lang='ruby'>auth.create_token_request(options) â String</span><span lang='java'>auth.createTokenRequest(AuthOptions options, TokenParams params) â String</span></p>
</blockquote>
<p>Creates and signs a token request based on the specified <span lang="default">options</span><span lang="java">authOptions and  tokenParams</span>. Note this can only be used when the key value is available locally. Otherwise, signed token requests must be obtained from the key owner (either using the token request callback or url). Use this to generate signed token requests in order to implement a token request callback for use by other clients.</p>
<p>If the request is successful the resulting token request is JSON-encoded and <span lang="java">returned</span><span lang="default">passed back in the callback</span>. If the request is unsuccessful <span lang="java">an appropriate Exception is thrown</span><span lang="default">an appropriate error object is passed to the callback</span>.</p>
<pre lang="javascript"><code lang="javascript">client.auth.createTokenRequest(options, function(err, tokenRequest){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token request = ' + tokenRequest);
});</code></pre>
<pre lang="nodejs"><code lang="nodejs">client.auth.createTokenRequest(options, function(err, tokenRequest){
  if(err)
    console.log('An error occurred; err = ' + err.message);
  else
    console.log('Success; token request = ' + tokenRequest);
});</code></pre>
<pre lang="java"><code lang="java">try {
  String tokenRequest = client.auth.createTokenRequest(authOptions, tokenParams);
  System.out.println("Success; token = " + tokenRequest);
} catch(AblyException e) {
  System.out.println("An error occurred; err = " + e.getMessage());
}</code></pre>
<h4>Parameters</h4>
<dl>
	<dt><div lang="default">options</div></dt>
	<dd>an optional object containing any <a href="#auth-options">AuthOptions</a> required to supplement or override the options given when instancing the library, plus any required <a href="#token-params">TokenParams</a> options.</dd>
	<dt><div lang="default">callback</div></dt>
	<dd>is a function of the form: <code>function(err, result)</code><br />
where:<br />
<ul><li><code>err</code> contains an error object containing the error details</li><br />
<li>On success, <code>result</code> contains the <a href="#token-details">TokenDetails</a> result.</li></ul></dd>
	<dt><div lang="java">AuthOptions authOptions</div></dt>
	<dd>An <a href="#auth-options">AuthOptions</a> instance containing any options to supplement or override the Options given when instancing the library.</dd>
</dl>
<dl>
	<dt><div lang="java">TokenParams tokenParams</div></dt>
	<dd>A <a href="#token-params">TokenParams</a> instance containing the specific parameters of the token request.</dd>
</dl>
<h2 id="auth-options">AuthOptions</h2>
<p>An <code>AuthOptions</code> object contains credentials and related options in support of interacting with the Ably service. <code>AuthOptions</code> are a subset of the Ably library <a href="/realtime/usage#options">Options</a>. Various methods on the Auth object take <span lang="java">an AuthOptions argument</span><span lang="default">one or more AuthOptions options</span> to enable the authentication of the requesting client to the service.<br />
Options specified in this way will supplement or override the corresponding options given when the library was instanced.</p>
<p>AuthOptions <span lang="java">fields</span><span lang="default">options</span> are as follows.</p>
<dl>
	<dt><span lang="java">public TokenCallback</span> authCallback</dt>
	<dd>A callback to call to obtain a signed token request. This enables a client to obtain token requests from another entity, so tokens can be renewed without the client requiring access to keys.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> authUrl</dt>
	<dd>A URL to query to obtain a signed token request. This enables a client to obtain token requests from another entity, so tokens can be renewed without the client requiring access to keys.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> keyName</dt>
	<dd>A key name. This is used in instances where a full key or token are not provided at initialisation.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> keySecret</dt>
	<dd>The secret key value for an Ably key associated with this client.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> authToken</dt>
	<dd>An authentication token issued for this application against a specific key and TokenParams</dd>
</dl>
<dl>
	<dt><span lang="java">public <a href="/realtime/types#param">Param</a>[]</span> authHeaders</dt>
	<dd>Headers to be included in any request made by the library to the authURL.</dd>
</dl>
<dl>
	<dt><span lang="java">public <a href="/realtime/types#param">Param</a>[]</span> authParams</dt>
	<dd>Query params to be included in any request made by the library to the authURL.</dd>
</dl>
<dl>
	<dt><span lang="java">public boolean</span> queryTime</dt>
	<dd>This may be set in instances that the library is to sign token requests based on a given key. If true, the library will query the Ably system for the current time instead of relying on a locally-available time of day.</dd>
</dl>
<h2 id="token-params">TokenParams</h2>
<p>A <code>TokenParams</code> object is associated with a token request and contains the parameters of the request, corresponding to the desired attributes of the token. Methods on the Auth object that may trigger a token request take <span lang="java">a TokenParams argument</span><span lang="default">one or more TokenParams options</span>.</p>
<p>TokenParams <span lang="java">fields</span><span lang="default">options</span> are as follows.</p>
<dl>
	<dt><span lang="java">public String</span> keyName</dt>
	<dd>The key name against which this request is made. The key name is the public part of the API key before the colon <code>:</code> character</dd>
</dl>
<dl>
	<dt><span lang="java">public long</span> ttl</dt>
	<dd>[default = 3,600,000 (1 hour)] Requested time to live for the token in milliseconds. If none is specified a default of 1 hour is provided. The maximum lifetime is 24 hours or less depending on application settings and the attributes of the issuing key; any request exceeding that lifetime will be rejected with an error.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> capability</dt>
	<dd>[default = &#8220;{\&#8221;<strong>\&#8220;: [&#8221;</strong>&#8220;]}&#8221; (JSON string)] The capability to associate with the access token. If none is specified, a token will be requested with all of the capabilities of the specified key. If the token request is successful, the capability of the returned token will be the intersection of this capability with the capability of the issuing key.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> clientId</dt>
	<dd>A clientId to associate with this token. The generated token may be used to authenticate as this clientId.</dd>
</dl>
<dl>
	<dt><span lang="java">public long</span> timestamp</dt>
	<dd>The timestamp (in milliseconds since the epoch) of this request. Timestamps, in conjunction with the nonce, are used to prevent token requests from being replayed.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> nonce</dt>
	<dd>An opaque nonce string of at least 16 characters to ensure uniqueness of this request. Any subsequent request using the same nonce will be rejected.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> mac</dt>
	<dd>The Message Authentication Code (MAC) for this request. See <a href="/rest/authentication">the Authentication documentation</a> for more details on the construction of the MAC.</dd>
</dl>
<h2 id="token-details">TokenDetails</h2>
<p>A <code>TokenDetails</code> object contains the parameters of a response from a successful token request the service. This contains the token string itself plus various items of metadata relating to that token.</p>
<p>TokenDetails <span lang="java">fields</span><span lang="default">properties</span> are as follows.</p>
<dl>
	<dt><span lang="java">public String</span> token</dt>
	<dd>The token itself.</dd>
</dl>
<dl>
	<dt><span lang="java">public long</span> expires</dt>
	<dd>The time (in milliseconds since the epoch) at which this token expires.</dd>
</dl>
<dl>
	<dt><span lang="java">public long</span> issued</dt>
	<dd>The time (in milliseconds since the epoch) at which this token was issued.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> capability</dt>
	<dd>The capability associated with this token. See <a href="/rest/authentication">the Authentication documentation</a> for more details on capabilities.</dd>
</dl>
<dl>
	<dt><span lang="java">public String</span> clientId</dt>
	<dd>The clientId, if any, bound to this token. If a clientId is included, then the token authenticates its bearer as that clientId, and the token may only be used to perform operations on behalf of that clientId.</dd>
</dl>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/images/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/how-ably-works/'>How Ably works</a></li>
</ul>
  <h2><a href="/realtime/">Realtime client lib</a></h2>
<ul>
<li class=''><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class='selected'><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
<li class=''><a href='/realtime/types/'>Types</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Using the REST library</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2>General</h2>
<ul>
<li class=''><a href='/general/authentication/'>Authentication</a></li>
<li class=''><a href='/general/channel-rules-namespaces/'>Channel Rules and Namespaces</a></li>
<li class=''><a href='/general/webhooks/'>Receiving Webhooks</a></li>
<li class=''><a href='/general/statistics/'>Application Statistics</a></li>
<li class=''><a href='/general/migrating/'>Migrating to Ably</a></li>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/features/'>Features spec v0.8</a></li>
<li class=''><a href='/client-lib-development-guide/feature-prioritisation/'>Feature prioritisation</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/rest-api/'>REST API Definition</a></li>
<li class=''><a href='/client-lib-development-guide/test-api/'>Sandbox Test API</a></li>
<li class=''><a href='/client-lib-development-guide/encryption/'>Encryption</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/connection-fallback/'>Connection host fallback</a></li>
<li class=''><a href='/client-lib-development-guide/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
<li class=''><a href='/code-index/'>Code Examples List</a></li>
</ul>
  <ul>
<li><a href="https://www.ably.io">Visit Ably.io</a></li>
</ul>
</div>

</body>
</html>
