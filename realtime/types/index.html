<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Types</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/assets/vendor/prettify/prettify.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheet.css" media="screen">

    <script src="/assets/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/base64.js" type="text/javascript"></script>

    <script src="/assets/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="//cdn.ably.io/lib/ably.min.js" type="text/javascript"></script>

    <script src="/assets/javascripts/application.js" type="text/javascript"></script>
    <script src="/assets/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.7.5">
  </head>
  <body>
    <div class="canonical-notice">
      <img src="/assets/icon-alert.png">
      <span class="canonical-notice-text">
        You are viewing our bleeding edge unstable documentation. We recommend you use of our <a href="https://www.ably.io/documentation">stable documentation Â»</a>
      </span>
      <img src="/assets/icon-alert.png">
    </div>
    <div class="fork-banner"><a href="https://github.com/ably/docs"><img src="/assets/forkme.png" alt="Fork me on GitHub"></a></div>

  <div id="documentation">
    
      <nav class="jump-to-nav">
        <div class="form">
          <select id="jump-to-nav">
            <option>Jump to ...</option>
            <optgroup label='Data types'>
<option id="anchor-message">Message</option>
<option id="anchor-presence-message">Presence Message</option>
<option id="anchor-paginated-result">Paginated Result</option>
<option id="anchor-token-request">Token Request</option>
<option id="anchor-token-details">Token Details</option>
</optgroup>
<optgroup label='Other Types'>
<option id="anchor-client-options">Client Options</option>
<option id="anchor-deferrable">Deferrable</option>
</optgroup>
          </select>
        </div>
      </nav>
    
    <header>
      
        <div class="breadcrumb"><a href="/realtime/">Realtime Client Library API</a><span class="separator">/</span></div>
      
      
        <h1 id="title">Types</h1>
      
    </header>
    <article>
      <p>The Ably client library defines both data types and option types.  Data types are used to represent object such as messages; Option types are used in method arguments.</p>
<h2>Data types</h2>
<h3 id="message"><span lang='default'>Message</span><span lang='java'>io.ably.types.Message</span><span lang='ruby'>Ably::Models::Message</span></h3>
<p>A <code>Message</code> represents an individual message that is sent to or received from Ably</p>
<h4>Attributes</h4>
<dl>
	<dt><code>name</code></dt>
	<dd>Event name, if provided<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><div lang="java"><code>data</code></div></dt>
	<dd>The message payload<br><i>Type: String, ByteArray, JSONObject, JSONArray</i></dd>
	<dt><div lang="javascript"><code>data</code></div></dt>
	<dd>The message payload<br><i>Type: String, StringBuffer, JSON Object</i></dd>
	<dt><div lang="ruby"><code>data</code></div></dt>
	<dd>The message payload<br><i>Type: String, Binary (ASCII-8BIT String), Hash, Array</i></dd>
</dl>
<dl>
	<dt><code>id</code></dt>
	<dd>Unique ID assigned by Ably to this message<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span></dt>
	<dd>The client ID of the publisher of this message<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>connectionId</code></span><span lang="ruby"><code>connection_id</code></span></dt>
	<dd>The connection ID of the publisher of this message<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><code>timestamp</code></dt>
	<dd>Timestamp when the presence update was received by the Ably the realtime service, as milliseconds since the epoch<br><i>Type: <span lang="java">Long Integer</span><span lang="javascript">Integer</span><span lang="ruby">Time</span></i></dd>
</dl>
<dl>
	<dt><code>encoding</code></dt>
	<dd>This will typically be empty as all messages received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the <code>data</code> payload<br><i>Type: String</i></dd>
</dl>
<h3 id="presence-message"><span lang='default'>PresenceMessage</span><span lang='java'>io.ably.types.PresenceMessage</span><span lang='ruby'>Ably::Models::PresenceMessage</span></h3>
<p>A <code>PresenceMessage</code> represents an individual presence update that is sent to or received from Ably</p>
<h4>Attributes</h4>
<dl>
	<dt><div lang="java"><code>action</code></div></dt>
	<dd>the event signified by a PresenceMessage<br><i>Type: enum Action { ABSENT, PRESENT, ENTER, LEAVE, UPDATE }</i></dd>
	<dt><div lang="javascript"><code>action</code></div></dt>
	<dd>the event signified by a PresenceMessage<br><i>Type: Integer value for Action { &#8220;ABSENT&#8221; : 0, &#8220;PRESENT&#8221; : 1, &#8220;ENTER&#8221; : 2, &#8220;LEAVE&#8221; : 3, &#8220;UPDATE&#8221; : 4 }</i></dd>
	<dt><div lang="ruby"><code>action</code></div></dt>
	<dd>the event signified by a PresenceMessage<br><i>Type: enum ACTION { :absent, :present, :enter, :leave, :update }</i></dd>
</dl>
<dl>
	<dt><div lang="java"><code>data</code></div></dt>
	<dd>The optional presence update payload<br><i>Type: String, ByteArray, JSONObject, JSONArray</i></dd>
	<dt><div lang="javascript"><code>data</code></div></dt>
	<dd>The optional presence update payload<br><i>Type: String, StringBuffer, JSON Object</i></dd>
	<dt><div lang="ruby"><code>data</code></div></dt>
	<dd>The optional presence update payload<br><i>Type: String, Binary (ASCII-8BIT String), Hash, Array</i></dd>
</dl>
<dl>
	<dt><code>id</code></dt>
	<dd>Unique ID assigned by Ably to this presence update<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span></dt>
	<dd>The client ID of the publisher of this presence update<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>connectionId</code></span><span lang="ruby"><code>connection_id</code></span></dt>
	<dd>The connection ID of the publisher of this presence update<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><code>timestamp</code></dt>
	<dd>Timestamp when the presence update was received by the Ably the realtime service, as milliseconds since the epoch<br><i>Type: <span lang="java">Long Integer</span><span lang="javascript">Integer</span><span lang="ruby">Time</span></i></dd>
</dl>
<dl>
	<dt><code>encoding</code></dt>
	<dd>This will typically be empty as all presence updates received from Ably are automatically decoded client-side using this value. However, if the message encoding cannot be processed, this attribute will contain the remaining transformations not applied to the <code>data</code> payload<br><i>Type: String</i></dd>
</dl>
<h3 id="paginated-result"><span lang='default'>PaginatedResult</span><span lang='java'>io.ably.types.PaginatedResult</span><span lang='ruby'>Ably::Models::PaginatedResult</span></h3>
<p>A <code>PaginatedResult</code> is a type that represents a page of results for all message and presence history, stats and REST presence requests. The response from a <a href="/rest-api/#pagination">paginated REST API query</a> is accompanied by metadata that indicates the relative queries available to the <code>PaginatedResult</code> object</p>
<h4>Attributes</h4>
<dl>
	<dt><code>items</code></dt>
	<dd>contains a page of results (for example an Array of <a href="#message"><code>Message</code></a> or <a href="#presence-message"><code>PresenceMessage</code></a> objects for a channel history request)<br><i>Type: Array &lt;Message, Presence, Stats&gt;</i></dd>
	<dt><div lang="default"><code>isFirst</code></div></dt>
	<dd><code>true</code> if this page is the first page<br><i>Type: Boolean</i></dd>
	<dt><div lang="ruby"><code>first?</code></div></dt>
	<dd><code>true</code> if this page is the first page<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><div lang="default"><code>isLast</code></div></dt>
	<dd><code>true</code> if this page is the last page<br><i>Type: Boolean</i></dd>
	<dt><div lang="ruby"><code>last?</code></div></dt>
	<dd><code>true</code> if this page is the last page<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><div lang="default"><code>hasNext</code></div></dt>
	<dd><code>true</code> if there are further pages<br><i>Type: Boolean</i></dd>
	<dt><div lang="ruby"><code>has_next?</code></div></dt>
	<dd><code>true</code> if there are further pages<br><i>Type: Boolean</i></dd>
</dl>
<h4>Methods</h4>
<blockquote class="definition">
<p class="definition"><span lang='default'>first()</span><span lang='ruby'>first</span><span lang='java'>public PaginatedResult first()</span></p>
</blockquote>
<p>Returns a new <code>PaginatedResult</code> for the first page of results</p>
<blockquote class="definition">
<p class="definition"><span lang='default'>items()</span><span lang='ruby'>items</span><span lang='java'>public Array items()</span></p>
</blockquote>
<p>Returns the current page of results as an Array</p>
<blockquote class="definition">
<p class="definition"><span lang='default'>next()</span><span lang='ruby'>next</span><span lang='java'>public PaginatedResult next()</span></p>
</blockquote>
<p>Returns a new <code>PaginatedResult</code> loaded with the next page of results. If there are no further pages, then <span lang="default"><code>null</code></span><span lang="java"><code>Null</code></span><span lang="ruby"><code>nil</code></span> is returned</p>
<h4>Example</h4>
<pre lang="javascript"><code lang="javascript">channel.history(function(err, paginatedResult) {
  console.log("Page 0 item 0:" + paginatedResult.items[0].data);
  paginatedResult.next(function(err, nextPage) {
    console.log("Page 1 item 1:" + nextPage.items[1].data);
  });
});</code></pre>
<pre lang="java"><code lang="java">PaginatedResult firstPage = channel.history();
System.out.println("Page 0 item 0:" + firstPage.items[0].data);
if (firstPage.hasNext) {
  PaginatedResult nextPage = firstPage.next();
  System.out.println("Page 1 item 1:" + nextPage.items[1].data);
});</code></pre>
<pre lang="ruby"><code lang="ruby"># When using the REST sync library
first_page = channel.history
puts "Page 0 item 0: #{first_page.items[0].data}"
if first_page.has_next?
  next_page = first_page.next
  puts "Page 1 item 1: #{next_page.items[1].data}"
end

# When using the Realtime EventMachine library
channel.history do |first_page|
  puts "Page 0 item 0: #{first_page.items[0].data}"
  if first_page.has_next?
    first_page.next do |next_page|
      puts "Page 1 item 1: #{next_page.items[1].data}"
    end
  end
end</code></pre>
<h3 id="token-request"><span lang='default'>TokenRequest</span><span lang='java'>io.ably.types.TokenRequest</span><span lang='ruby'>Ably::Models::TokenRequest</span></h3>
<p><code>TokenRequest</code> is a type containing parameters for a token request. Tokens are requested using the <a href="/rest-api/#requesttoken">REST requestToken endpoint</a></p>
<h3>Attributes</h3>
<dl>
	<dt><span lang="default"><code>keyName</code></span><span lang="ruby"><code>key_name</code></span></dt>
	<dd>The key name of the key against which this request is made. The key name is public, whereas the key secret is private<br><i>Type: String</i></dd>
	<dt><code>ttl</code></dt>
	<dd>Requested time to live for the token in <span lang="default">milliseconds</span><span lang="ruby">seconds</span>. If the token request is successful, the TTL of the returned token will be less than or equal to this value depending on application settings and the attributes of the issuing key.<br><i>Type: Integer</i></dd>
	<dt><code>timestamp</code></dt>
	<dd>The timestamp of this request in milliseconds<br><i>Type: <span lang="java">Long Integer</span><span lang="javascript">Integer</span><span lang="ruby">Time</span></i></dd>
	<dt><code>capability</code></dt>
	<dd>Capability of the token. If the token request is successful, the capability of the returned token will be the intersection of this capability with the capability of the issuing key. The capability is a a JSON stringified canonicalised representation of the resource paths and associated operations. <a href="/realtime/authentication">Read more about authentication and capabilities</a><br><i>Type: String</i></dd>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span></dt>
	<dd>The client ID to associate with this token. When provided, the token may only be used to perform operations on behalf of that client ID<br><i>Type: String</i></dd>
	<dt><code>nonce</code></dt>
	<dd>An opaque nonce string of at least 16 characters<br><i>Type: String</i></dd>
	<dt><code>mac</code></dt>
	<dd>The Message Authentication Code for this request<br><i>Type: String</i></dd>
</dl>
<h3 id="token-details"><span lang='default'>TokenDetails</span><span lang='java'>io.ably.types.TokenDetails</span><span lang='ruby'>Ably::Models::TokenDetails</span></h3>
<p><code>TokenDetails</code> is a type providing details of a token and its associated metadata, provided when the system successfully requests a token from the system</p>
<h3>Attributes</h3>
<dl>
	<dt><code>token</code></dt>
	<dd>The token itself<br><i>Type: String</i></dd>
	<dt><code>expires</code></dt>
	<dd><span lang="default">The time (in millis since the epoch)</span><span lang="ruby">The time</span> at which this token expires<br><i>Type: <span lang="java">Long Integer</span><span lang="javascript">Integer</span><span lang="ruby">Time</span></i></dd>
	<dt><code>issued</code></dt>
	<dd><span lang="default">The time (in millis since the epoch)</span><span lang="ruby">The time</span> at which this token was issued<br><i>Type: String</i></dd>
	<dt><code>capability</code></dt>
	<dd>The capability associated with this token. The capability is a a JSON stringified canonicalised representation of the resource paths and associated operations. <a href="/realtime/authentication">Read more about authentication and capabilities</a><br><i>Type: String</i></dd>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span></dt>
	<dd>The client ID, if any, bound to this token. If a client ID is included, then the token authenticates its bearer as that client ID, and the token may only be used to perform operations on behalf of that client ID.<br><i>Type: String</i></dd>
</dl>
<div lang="Ruby">
<h3>Methods</h3>
<dl>
	<dt><code>expired?</code></dt>
	<dd>True when the token has expired<br><i>Type: Boolean</i><br />
</div></dd>
</dl>
<h3 id="error-info"><span lang='default'>ErrorInfo</span><span lang='java'>io.ably.types.ErrorInfo</span><span lang='ruby'>Ably::Models::ErrorInfo</span></h3>
<p>An <code>ErrorInfo</code> is a type encapsulating error information containing an Ably-specific error code and generic status code.</p>
<h4>Attributes</h4>
<dl>
	<dt><code>code</code></dt>
	<dd>Ably error code (see <a href="https://github.com/ably/ably-common/blob/master/protocol/errors.json">ably-common/protocol/errors.json</a>)<br><i>Type: Integer</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>statusCode</code></span><span lang="ruby"><code>status_code</code></span></dt>
	<dd>HTTP Status Code corresponding to this error, where applicable<br><i>Type: Integer</i></dd>
</dl>
<dl>
	<dt><code>message</code></dt>
	<dd>Additional message information, where available<br><i>Type: String</i></dd>
</dl>


<div lang="java"> <!-- start java language block -->
<h3 id="ably-exception">io.ably.types.AblyException</h3>
<p>An <code>AblyException</code> is an exception encapsulating error information containing an Ably-specific error code and generic status code, where applicable.</p>
<h4>Attributes</h4>
<dl>
	<dt><code>errorInfo</code></dt>
	<dd><a href="/realtime/types#error-info">@ErrorInfo</a> corresponding to this exception, where applicable<br><i>Type: ErrorInfo</i></dd>
</dl>

</div> <!-- /end java language block -->



<div lang="ruby"> <!-- start ruby language block -->
<h3 id="ably-exception">Ably::Exceptions::BaseAblyException</h3>
<p>An <code>BaseAblyException</code> is an exception encapsulating error information containing an Ably-specific error code and generic status code, where applicable.</p>
<h4>Attributes</h4>
<dl>
	<dt><code>code</code></dt>
	<dd>Ably error code (see <a href="https://github.com/ably/ably-common/blob/master/protocol/errors.json">ably-common/protocol/errors.json</a>)<br><i>Type: Integer</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>statusCode</code></span><span lang="ruby"><code>status_code</code></span></dt>
	<dd>HTTP Status Code corresponding to this error, where applicable<br><i>Type: Integer</i></dd>
</dl>
<dl>
	<dt><code>message</code></dt>
	<dd>Additional message information, where available<br><i>Type: String</i></dd>
</dl>

</div> <!-- /end ruby language block -->

<h2>Other types</h2>
<h3 id="client-options"><span lang='default'>ClientOptions</span><span lang='java'>io.ably.types.ClientOptions</span></h3>


<div lang="nodejs,javascript"> <!-- start nodejs,javascript language block -->
<p><code>ClientOptions</code> is a plain Javascript object and is used in the the <code>Ably.Realtime</code> constructor&#8217;s <code>options</code> argument.  The following attributes can be defined on the object:</p>

</div> <!-- /end nodejs,javascript language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p><code>ClientOptions</code> is a Hash object and is used in the the <code>Ably::Realtime</code> constructor&#8217;s <code>options</code> argument.  The following key symbol values can be added to the Hash:</p>

</div> <!-- /end ruby language block -->



<div lang="java"> <!-- start java language block -->
<p><code>ClientOptions</code> is used in the the <code>AblyRealtime</code> constructor&#8217;s <code>options</code> argument</p>

</div> <!-- /end java language block -->

<dl>
	<dt><span lang="default"><code>key</code></span><span lang="ruby"><code>:key</code></span></dt>
	<dd>The full key string, as obtained from the <a href="http://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>. Use this option if you wish to use Basic authentication, or wish to be able to issue tokens without needing to defer to a separate entity to sign token requests. Read more about <a href="http://localhost:4000/realtime/authentication">Basic authentication</a><br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>token</code></span><span lang="ruby"><code>:token</code></span></dt>
	<dd>An authenticated token string, that is most commonly obtained from the <code>token</code> property of a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> component of a token response. Use this option if you wish to use Token authentication. Read more about <a href="http://localhost:4000/realtime/authentication">Token authentication</a><br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>tls</code></span><span lang="ruby"><code>:tls</code></span></dt>
	<dd><em>true</em> A boolean value, indicating whether or not a TLS (&#8220;SSL&#8221;) secure connection should be used. An insecure connection cannot be used with Basic authentication ensuring private keys are compromised in transit.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>:client_id</code></span></dt>
	<dd>A client ID, used for identifying this client for presence purposes. The <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> can be any string. This option is primarily intended to be used in situations where the library is instanced with a key; note that a <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> may also be implicit in a token used to instance the library; an error will be raised if a <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> specified here conflicts with the <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> implicit in the token.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>useTokenAuth</code></span><span lang="ruby"><code>:use_token_auth</code></span></dt>
	<dd>When true, Token auth will be used.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authCallback</code></span><span lang="ruby"><code>:auth_callback</code></span></dt>
	<dd>A <span lang="default">function</span><span lang="java"><code>TokenCallback</code> instance</span><span lang="ruby">proc / lambda</span> to call when a new token is required.</span>. The role of the callback is to either generate a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> which may then be submitted by the library to the <a href="/rest-api#requesttoken"><code>requestToken</code> REST API</a>; or to provide a valid token in as a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> object. See <a href="/rest/authentication">authentication</a> for details of the token request format and associated API calls.<br><i>Type: <span lang="default">Function</span><span lang="java"><code>TokenCallback</code></span><span lang="ruby">Proc / Lamda</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authUrl</code></span><span lang="ruby"><code>:auth_url</code></span></dt>
	<dd>A URL that the library may use to obtain a token string (in plain text format), or a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> or <a href="/realtime/types#token-details"><code>TokenDetails</code></a> (in JSON format). For example, this can be used by a client to obtain signed token requests from an application server.<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authMethod</code></span><span lang="ruby"><code>:auth_method</code></span></dt>
	<dd><em><span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span></em> The HTTP verb to use for the request, either <span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span> or <span lang="default"><code>POST</code></span><span lang="ruby"><code>:post</code></span><br><i>Type: <span lang="default">String</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authHeaders</code></span><span lang="ruby"><code>:auth_headers</code></span></dt>
	<dd>A set of headers to be added to any request made to the <code>authUrl</code>. Useful when an application requires these to be added to validate the request or implement the response.<br><i>Type: <span lang="default">Object</span><span lang="ruby">Hash</span><span lang="java">Param[]</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authParams</code></span><span lang="ruby"><code>:auth_params</code></span></dt>
	<dd>A set of params to be added to any request made to the <code>authUrl</code>. When the <code>authMethod</code> is <code>GET</code>, query params are added to the URL, whereas when <code>authMethod</code> is <code>POST</code>, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response.<br><i>Type: <span lang="default">Object</span><span lang="ruby">Hash</span><span lang="java">Param[]</span></i></dd>
</dl>


<div lang="javascript,nodejs"> <!-- start javascript,nodejs language block -->
<dl>
	<dt><code>log</code></dt>
	<dd>Parameters to control the log output of the library. The supplied value must be an object that may contain one or both of the following entries:<br />
<ul><br />
  <li><code>level</code>: a number controlling the verbosity of the output from 1 (minimum, errors only) to 4 (most verbose);</li><br />
  <li><code>handler</code>: a function to handle each line of log output. If <code>handler</code> is not specified, <code>console.log</code> is used.</li><br />
</ul><br />
Note that the log level and log handler have global scope in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: Object</i></dd>
</dl>
<dl>
	<dt><code>transports</code></dt>
	<dd>An optional array of transports to use, in descending order of preference. <span lang="javascript">In the browser environment the available transports are: <code>web_socket</code>, <code>xhr</code>, <code>comet</code>, <code>jsonp</code>, <code>iframe</code>.</span></dd>
</dl>

</div> <!-- /end javascript,nodejs language block -->



<div lang="java"> <!-- start java language block -->
<dl>
	<dt><code>logLevel</code></dt>
	<dd><em>99</em> A number controlling the verbosity of the output from 2 (maximum, verbose) to 6 (errors only). A special value of 99 will silence all logging. Note that the <code>logLevel</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: Object</i></dd>
</dl>
<dl>
	<dt><code>logHandler</code></dt>
	<dd><em><code>System.out PrintStream</code></em> A <code>PrintStream</code> to handle each line of log output. If <code>logHandler</code> is not specified, <code>System.out</code> is used. Note that the <code>logHandler</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: PrintStream</i></dd>
</dl>

</div> <!-- /end java language block -->



<div lang="ruby"> <!-- start ruby language block -->
<dl>
	<dt><code>:log_level</code></dt>
	<dd><em><code>Logger::ERROR</code></em> Log level for the standard Logger that outputs to <code>STDOUT</code>. Can be set to <code>:fatal</code> (<code>Logger::FATAL</code>), <code>:error</code> (<code>Logger::ERROR</code>), <code>:warn</code> (<code>Logger::WARN</code>), <code>:info</code> (<code>Logger::INFO</code>), <code>:debug</code> (<code>Logger::DEBUG</code>) or <code>:none</code><br><i>Type: Logger::SEVERITY</i></dd>
</dl>
<dl>
	<dt><code>:logger</code></dt>
	<dd><em><code>STDOUT Logger</code></em> A <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html">Ruby <code>Logger</code></a> compatible object to handle each line of log output. If <code>loggger</code> is not specified, <code>STDOUT</code> is used.<br><i>Type: Ruby Logger</i></dd>
</dl>

</div> <!-- /end ruby language block -->

<dl>
	<dt><span lang="default"><code>useBinaryProtocol</code></span><span lang="ruby"><code>:use_binary_protocol</code></span></dt>
	<dd><em>true</em> The client library detects whether or not it has the capability to use the binary protocol, and disables this option if the binary protocol is not supported.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>queueMessages</code></span><span lang="ruby"><code>:queue_messages</code></span></dt>
	<dd><em>true</em> If false, this disables the default behaviour whereby the library queues messages on a connection in the disconnected or connecting states. The default behaviour allows applications to submit messages immediately upon instancing the library, without having to wait for the connection to be established. Applications may use this option to disable that behaviour if they wish to have application-level control over the queueing under those conditions.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>echoMessages</code></span><span lang="ruby"><code>:echo_messages</code></span></dt>
	<dd><em>true</em> If false, prevents messages originating from this connection being echoed back on the same connection.</dd>
</dl>
<dl>
	<dt><span lang="default"><code>autoConnect</code></span><span lang="ruby"><code>:auto_connect</code></span></dt>
	<dd><em>true</em> By default as soon as the client library is instanced it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when required.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>recover</code></span><span lang="ruby"><code>:recover</code></span></dt>
	<dd>This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the Realtime library. This might typically be used by clients of the browser library to ensure connection state can be preserved when the user refreshes the page. See <a href="/realtime/connection/#connection-state-recovery">connection state recovery</a> for further information on this option.<br><i>Type: String</i></dd>
</dl>


<div lang="ruby"> <!-- start ruby language block -->
<h3 id="deferrable">Deferrable</h3>
<p>The <code>SafeDeferrable</code> class provides an <a href="https://github.com/eventmachine/eventmachine">EventMachine</a> compatible <a href="http://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable"><code>Deferrable</code></a>.</p>
<p>A <code>SafeDeferrable</code> ensures that any exceptions in callbacks provided by developers will not break the client library and stop further execution of code.</p>
<h4>Methods</h4>
<h6 id="callback">callback</h6>
<blockquote class="definition">
<p class="definition">callback(&amp;block)</p>
</blockquote>
<p>Specify a block to be executed if and when the <code>Deferrable</code> object receives a status of <code>:succeeded</code>. See the <a href="http://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#callback-instance_method">EventMachine callback documentation</a></p>
<h6 id="errback">errback</h6>
<blockquote class="definition">
<p class="definition">errback(&amp;block)</p>
</blockquote>
<p>Specify a block to be executed if and when the <code>Deferrable</code> object receives a status of <code>:failed</code>. See the <a href="http://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#errback-instance_method">EventMachine errback documentation</a></p>
<h6 id="fail">fail</h6>
<blockquote class="definition">
<p class="definition">fail(*args)</p>
</blockquote>
<p>Mark the <code>Deferrable</code> as failed and trigger all callbacks. See the <a href="http://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#fail-instance_method">EventMachine fail documentation</a></p>
<h6 id="succeed">succeed</h6>
<blockquote class="definition">
<p class="definition">succeed(*args)</p>
</blockquote>
<p>Mark the <code>Deferrable</code> as succeeded and trigger all callbacks. See the <a href="http://www.rubydoc.info/gems/eventmachine/EventMachine/Deferrable#succeed-instance_method">EventMachine succeed documentation</a></p>

</div> <!-- /end ruby language block -->

<p>&nbsp;</p>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/assets/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/root/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/root/how-ably-works/'>How Ably works</a></li>
<li class=''><a href='/root/usage-limits-billing/'>Usage Limits &amp; Billing</a></li>
</ul>
  <h2><a href="/realtime/">Realtime client lib</a></h2>
<ul>
<li class=''><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
<li class='selected'><a href='/realtime/types/'>Types</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Using the REST library</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2>General</h2>
<ul>
<li class=''><a href='/general/authentication/'>Authentication</a></li>
<li class=''><a href='/general/channel-rules-namespaces/'>Channel Rules and Namespaces</a></li>
<li class=''><a href='/general/webhooks/'>Receiving Webhooks</a></li>
<li class=''><a href='/general/statistics/'>Application Statistics</a></li>
<li class=''><a href='/general/migrating/'>Migrating to Ably</a></li>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/features/'>Features spec v0.8</a></li>
<li class=''><a href='/client-lib-development-guide/feature-prioritisation/'>Feature prioritisation</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/rest-api/'>REST API Definition</a></li>
<li class=''><a href='/client-lib-development-guide/test-api/'>Sandbox Test API</a></li>
<li class=''><a href='/client-lib-development-guide/encryption/'>Encryption</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/connection-fallback/'>Connection host fallback</a></li>
<li class=''><a href='/client-lib-development-guide/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
</ul>
  <ul>
<li><a href="https://www.ably.io">Visit Ably.io</a></li>
</ul>
</div>

</body>
</html>
