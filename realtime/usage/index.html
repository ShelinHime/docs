<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Using the Realtime library</title>
    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/vendor/prettify/prettify.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheet.css" media="screen">

    
      <link rel="canonical" href="https://www.ably.io/documentation/realtime/usage" />
    

    <script src="/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>
    <script src="/vendor/javascripts/base64.js" type="text/javascript"></script>

    <script src="/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="//cdn.ably.io/lib/ably.min.js" type="text/javascript"></script>

    <script src="/javascripts/application.js" type="text/javascript"></script>
    <script src="/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.7.5">
  </head>
  <body>
    <div class="canonical-notice">
      <img src="/images/icon-alert.png">
      <span class="canonical-notice-text">
        You are viewing our bleeding edge unstable documentation. We recommend you use our <a href="https://www.ably.io/documentation">stable documentation Â»</a>
      </span>
      <img src="/images/icon-alert.png">
    </div>
    <div class="fork-banner"><a href="https://github.com/ably/docs"><img src="/images/forkme.png" alt="Fork me on GitHub"></a></div>

  <div id="documentation">
    
      <nav class="jump-to-nav">
        <div class="form">
          <select id="jump-to-nav">
            <option>Jump to ...</option>
            <optgroup label='Help with'>
<option id="anchor-title">Usage</option>
</optgroup>
<optgroup label='Realtime API reference'>
<option id="anchor-constructor">constructor</option>
</optgroup>
<optgroup label='Attributes'>
<option id="anchor-auth">auth</option>
<option id="anchor-channels">channels</option>
<option id="anchor-client-id">client_id</option>
<option id="anchor-connection">connection</option>
<option id="anchor-rest-client">rest_client</option>
</optgroup>
<optgroup label='Methods'>
<option id="anchor-connect">connect</option>
<option id="anchor-close">close</option>
<option id="anchor-stats">stats</option>
<option id="anchor-time">time</option>
</optgroup>
          </select>
        </div>
      </nav>
    
    <header>
      <script type="text/javascript">window.NavLangs=["javascript","nodejs","ruby","java","swift","objc","csharp"];</script>

      <div id="version-not-latest-warning"></div>

      
        <div id="version-container">
          <div class="dropdown">
            <input id="toggle2" type="checkbox">
            <label for="toggle2" class="animate">Version 0.9<i class="fa fa-list float-right"></i></label>
            <ul class="animate">
              
                  <li class="animate" data-version="0.8"><a href="/realtime/versions/v0.8/usage/">Version 0.8</a></li>
              
            </ul>
           </div>
        </div>
        <script type="text/javascript">window.AblyVersionInfo={'langVersions':{"javascript":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"java":{"versions":["0.8"],"most_recent_path":"/realtime/versions/v0.8/usage/"},"python":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"php":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"ruby":{"versions":["0.8"],"most_recent_path":"/realtime/versions/v0.8/usage/"},"nodejs":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"objc":{"versions":["0.8"],"most_recent_path":"/realtime/versions/v0.8/usage/"},"swift":{"versions":["0.8"],"most_recent_path":"/realtime/versions/v0.8/usage/"},"go":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"csharp":{"versions":["0.8"],"most_recent_path":"/realtime/versions/v0.8/usage/"},"cplusplus":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"c":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"appcelerator":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"},"phonegap":{"versions":["0.9","0.8"],"most_recent_path":"/realtime/usage/"}},'latestForPage':{'version': '0.9', 'path': '/realtime/usage/'},'page':'0.9'}</script>
      

      
        <div class="breadcrumb"><a href="/realtime/">Realtime Client Library API</a><span class="separator">/</span></div>
      
      
        <h1 id="title">Using the Realtime library</h1>
      
    </header>
    <article>
      <p>The Realtime library when initialized attempts to establish and maintain a single connection to the Ably realtime service. The library extends the <a href="/rest/usage">REST library</a> to provide all REST API functionality including the <a href="/rest/authentication">authentication API</a>. Whereas the <a href="/rest-api">Ably REST API</a> is stateless, the Realtime API maintains connection and channel state.</p>
<p>The Ably Realtime client library is available for <a href="https://www.ably.io/download/realtime-client-libraries">most popular languages and platforms</a> with a consistent API across all platforms. You can view this documentation with your preferred language API and code examples using the language selector navigation above. If your preferred language is not listed in the language selector, please <a href="https://www.ably.io/download/realtime-client-libraries">download the library in your preferred language</a> and use that as a reference.</p>


<div lang="javascript"> <!-- start javascript language block -->
<p>The Realtime library for browser Javascript environments should be loaded from the Ably CDN as follows:</p>
<pre lang="javascript"><code lang="javascript">&lt;script lang="text/javascript" src="//cdn.ably.io/lib/ably.min.js" /&gt;</code></pre>
<p>You can also obtain the library as an <a href="https://www.npmjs.com/package/ably">NPM module</a>, or download the source directly from <a href="https://github.com/ably/ably-js">Github</a></p>
<p>The script and module both contain the Realtime and REST libraries as well as all their dependencies. To instance the Realtime library:</p>
<pre lang="javascript"><code lang="javascript">var realtime = new Ably.Realtime({ key: apiKey });</code></pre>
<p>When referencing the client library from our CDN, we recommend that you include a major version number in the URL so that breaking changes, according to the <a href="http://semver.org/">semantic versioning scheme</a>, are never mistakenly used. For example, if you want to ensure that you only use the <code>MAJOR</code> version <code>0</code>, then use <a href="https://cdn.ably.io/lib/ably.min-0.js"><code>https://cdn.ably.io/lib/ably.min-0.js</code></a>. If you want to ensure that the <code>MINOR</code> version <code>0.8</code> is used, then use <a href="https://cdn.ably.io/lib/ably.min-0.8.js"><code>https://cdn.ably.io/lib/ably.min-0.8.js</code></a>. Additionally, the <code>.min</code> suffix can be dropped if you specifically want to use the non-minified version for debugging.</p>
<p><a href="https://github.com/ably/ably-js/releases">View a complete list of the Javascript library releases</a></p>

</div> <!-- /end javascript language block -->



<div lang="nodejs"> <!-- start nodejs language block -->
<p>The Realtime library for Node.js is suitable for clients and servers and is <a href="https://github.com/ably/ably-js">hosted on Github</a> and is obtainable as an NPM module <a href="https://npmjs.org/package/ably">directly from npm</a>. Install with:</p>
<pre lang="sh"><code lang="sh">npm install ably</code></pre>
<p>The Ably Node.js module contains both the REST and Realtime libraries; each is exported separately by the module. To instance the Realtime library:</p>
<pre lang="nodejs"><code lang="nodejs">var Ably = require('ably');
var realtime = new Ably.Realtime({ key: apiKey });</code></pre>

</div> <!-- /end nodejs language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p>The Realtime library for Ruby <a href="https://github.com/ably/ably-ruby">hosted on Github</a>  and is <a href="https://rubygems.org/gems/ably">published as a RubyGem</a> and can be installed as follows:</p>
<pre lang="sh"><code lang="sh">gem install ably</code></pre>
<p>If using bundler, simply add the following to your Gemfile and run <code>bundle install</code>:</p>
<pre lang="ruby"><code lang="ruby">gem 'ably'</code></pre>
<p>The Ably Ruby gem contains both the REST and Realtime libraries; each is namespaced separately by the gem. To instance the Realtime library:</p>
<pre lang="ruby"><code lang="ruby">ably = Ably::Realtime.new(key: api_key)</code></pre>

</div> <!-- /end ruby language block -->



<div lang="java"> <!-- start java language block -->
<p>The Realtime library for Java and Android is <a href="https://github.com/ably/ably-java">hosted on Github</a> and is downloadable as a JAR from <a href="https://github.com/ably/ably-java/releases">https://github.com/ably/ably-java/releases</a> or via <a href="https://bintray.com/ably-io/ably">JCentre</a>.</p>
<p>Ensure the JAR is included in your classpath as follows:</p>
<pre lang="java"><code lang="java">import io.ably.lib.types.*;
import io.ably.lib.realtime.*;
ClientOptions options = new ClientOptions(apiKey);
AblyRealtime realtime = new AblyRealtime(options);</code></pre>

</div> <!-- /end java language block -->



<div lang="csharp"> <!-- start csharp language block -->
<p>The Realtime library for .Net is available as a Nuget Package. Open the nuget console in visual studio and type.</p>
<p>PM&gt; Install-Package ably.io</p>
<p>Alternatively, search for the &#8216;ably.io&#8217; package through the Nuget UI</p>
<pre lang="csharp"><code lang="csharp">using IO.Ably;

var clientOptions = new ClientOptions("&lt;API Key&gt;");
var realtime = new AblyRealtime(clientOptions);</code></pre>

</div> <!-- /end csharp language block -->



<div lang="objc,swift"> <!-- start objc,swift language block -->
<p>The Ably library is <a href="https://github.com/ably/ably-ios">hosted on Github</a> and is <a href="https://cocoapods.org/?q=ably">available as a CocoaPod</a>. Add this line to your application&#8217;s Podfile:</p>
<pre lang="text"><code lang="text">pod 'AblyRealtime'</code></pre>
<p>And install with <code>pod install</code>. Then in your files:</p>
<pre lang="objc"><code lang="objc">#import "Ably/Ably.h"

ARTRealtime realtime = [[ARTRealtime alloc] initWithKey:apiKey];</code></pre>
<pre lang="swift"><code lang="swift">import Ably

let realtime = ARTRealtime(key: apiKey)</code></pre>

</div> <!-- /end objc,swift language block -->

<p>The supported <a href="#client-options">client options are described below</a>.</p>
<h1><span lang='default'>Realtime API Reference</span><span lang='ruby'>Realtime::Client API reference</span></h1>
<div class="inline-toc">
<ul><li>Realtime API reference
<ul>
<li>
Methods
<ul>
<li><a href='#connect'>connect()</a></li>
<li><a href='#close'>close()</a></li>
<li><a href='#stats'>stats(options)</a></li>
<li><a href='#time'>time()</a></li>
</ul>
</li>
<li>
Properties
<ul>
<li><a href='#auth'>auth</a></li>
<li><a href='#channels'>channels</a></li>
<li><a href='#client-id'>clientId</a></li>
<li><a href='#connection'>connection</a></li>
</ul>
</li>
<li>
Related types
<ul>
<li><a href='#client-options'>ClientOptions</a></li>
<li><a href='#params'>Params</a></li>
<li><a href='#stats'>Stats</a></li>
</ul>
</li>
</ul>
</li></ul>
</div><h2 id="constructor">Constructor</h2>
<p>The Ably Realtime library constructor is overloaded allowing it to be instanced using a <a href="#client-options"><code>ClientOptions</code></a> object, or more simply using a string containing an <a href="/general/authentication/#basic-authentication">API key</a> or <a href="/general/authentication/#token-authentication">Token</a>.</p>
<blockquote class="definition">
<p class="definition"><span lang='default'>new Ably.Realtime(String keyOrTokenId)</span><span lang='ruby'>Ably::Realtime.new(String key_or_token_id)</span><span lang='java'>new io.ably.lib.AblyRealtime(String keyOrTokenIdString)</span><span lang='csharp'>new AblyRealtime(string key)</span><span lang='objc'>- (instancetype)initWithKey:(NSString *)key</span><span lang='swift'>init(key: String)<br>init(token: String)</span></p>
</blockquote>
<p>This will instance the Realtime library with the provided API key or Token ID string.</p>
<blockquote class="definition">
<p class="definition"><span lang='default'>new Ably.Realtime(<a href="#client-options">ClientOptions</a> clientOptions)</span><span lang='ruby'>Ably::Realtime.new(<a href="#client-options">ClientOptions</a> client_options)</span><span lang='java'>new io.ably.lib.AblyRealtime(<a href="#client-options">ClientOptions</a> clientOptions)</span><span lang='csharp'>new AblyRealtime(<a href="#client-options">ClientOptions</a> clientOptions)</span><span lang='objc'>- (instancetype)initWithOptions:(<a href="#client-options">ARTClientOptions</a> *)options;</span><span lang='swift'>init(options: <a href="#client-options">ARTClientOptions</a>)</span></p>
</blockquote>


<div lang="default"> <!-- start default language block -->
<p>This will instance the library using the specified <a href="#client-options">ClientOptions</a>.</p>

</div> <!-- /end default language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p>This will instance the library and create a new <code>Ably::Realtime::Client</code> using the specified <a href="#client-options"><code>ClientOptions</code></a>.</p>

</div> <!-- /end ruby language block -->

<p>The Realtime constructor is used to instance the library. The Realtime library may be instanced multiple times with the same or different <a href="#client-options"><code>ClientOptions</code></a> in any given context. Except where specified otherwise, instances operate independently of one another.</p>
<h3 id="authentication">Authentication</h3>
<p>The Realtime library needs to have credentials to be able to authenticate with the Ably service. Ably supports both Basic and Token based authentication schemes. Read more on <a href="/realtime/authentication">authentication</a>.</p>
<h4>Basic Authentication</h4>
<p>A private API key string for <a href="#client-options"><span lang="default"><code>ClientOptions#key</code></span><span lang="csharp"><code>ClientOptions#Key</code></span></a> or the constructor, as obtained from the <a href="http://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>, is required for <a href="/general/authentication/#basic-authentication">Basic Authentication</a>. Use this option if you wish to use <a href="/general/authentication/#basic-authentication">Basic authentication</a>, or if you want to be able to <a href="/realtime/authentication/#request-token">request tokens</a> without needing to defer to a separate entity to sign token requests. Note that initializing the library with a <span lang="default"><code>key</code></span><span lang="csharp"><code>Key</code></span> does not necessarily mean that the library will use Basic auth; using the private key it is also able to create and sign token requests and use token authentication when necessary.</p>
<h4>Token Authentication</h4>
<p>The <a href="#client-options"><code>ClientOptions#token</code></a> option takes a token string, and assumes the token has been obtained from some other instance that requested the token. Use the token option if you are provided with a token to use and you do not have a key (or do not have a key with the capabilities that you require).</p>
<p>Since tokens are short-lived, it is rarely sufficient to start with a token without the means for refreshing it. The <a href="#client-options"><span lang="default"><code>authUrl</code> and <code>authCallback</code></span><span lang="csharp"><code>AuthUrl</code> and <code>AuthCallback</code></span><span lang="ruby"><code>:auth_url</code> and <code>:auth_callback</code></span> options</a> are provided to allow a user of the library to provide new tokens or token requests to the library as required; using these options allows the library to be instanced without a <span lang="default"><code>key</code> or <code>token</code></span><span lang="csharp"><code>Key</code> or <code>Token</code></span>, and an initial token will be obtained automatically when required.</p>
<p>Read more on <a href="/realtime/authentication">authentication</a>.</p>
<h2 id="properties"><span lang='default'>AblyRealtime Properties</span><span lang='java'>io.ably.lib.AblyRealtime Members</span><span lang='ruby'>Ably::Realtime::Client Attributes</span><span lang='objc,swift'>ARTRealtime Properties</span></h2>
<p>The Realtime client exposes the following public <span lang="default">attributes</span><span lang="java">members</span><span lang="javascript,nodejs,,objc,swift">properties</span>:</p>
<h6 id="auth"><span lang='default'>auth</span><span lang='csharp'>Auth</span></h6>
<p>A reference to the <a href="/realtime/authentication"><code>Auth</code></a> authentication object configured for this client library.</p>
<h6 id="channels"><span lang='default'>channels</span><span lang='csharp'>Channels</span></h6>
<p>A reference to the <a href="/realtime/channels-messages"><code>Channel</code></a> collection instance for this library indexed by the channel name. See <a href="/realtime/channels-messages/">channels and messages</a> for more information.</p>
<h6 id="client-id"><span lang='default'>clientId</span><span lang='ruby'>client_id</span><span lang='csharp'>ClientId</span></h6>
<p>The client ID string, if any, configured for this client connection. See <a href="/realtime/authentication">authentication</a> for more information on authentication and using a client ID.</p>
<h6 id="connection"><span lang='default'>connection</span><span lang='csharp'>Connection</span></h6>
<p>A reference to the <a href="/realtime/connection"><code>Connection</code></a> object for this library instance.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h6 id="rest-client">rest_client</h6>
<p>A reference to the <a href="/rest/usage">REST Client</a> configured with the same <a href="#client-options"><code>ClientOptions</code></a>. The Realtime library is a superset of the REST library, however accessing methods in the REST library, unlike the Realtime library, are blocking operations.</p>

</div> <!-- /end ruby language block -->

<h2 id="methods"><span lang='default'>AblyRealtime Methods</span><span lang='java'>io.ably.lib.AblyRealtime Methods</span><span lang='ruby'>Ably::Realtime::Client Methods</span><span lang='objc,swift'>ARTRealtime Methods</span></h2>
<h6 id="connect"><span lang='default'>connect</span><span lang='csharp'>Connect</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>connect()</span><span lang='ruby'><a href="/realtime/types#deferrable">Deferrable</a> connect &#8594; yields <a href="/realtime/connection"><code>Connection</code></a></span><span lang='java'>void connect()</span><span lang='csharp'>void Connect()</span></p>
</blockquote>
<p>Explicitly calling <code>connect</code> is unnecessary unless the <a href="#client-option"><code>ClientOption</code></a> <span lang="default"><code>autoConnect</code></span><span lang="ruby"><code>auto_connect</code></span><span lang="csharp"><code>AuthConnect</code></span> is disabled. This method calls <a href="/realtime/connection#connect"><span lang="default"><code>connection.connect()</code></span><span lang="ruby"><code>connection.connect</code></span><span lang="csharp"><code>connection.Connect()</code></span></a> and causes the connection to open, entering the <code>connecting</code> state.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from this method.</p>
<p>On successfully connecting to Ably, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to this method yields a <a href="/realtime/connection"><code>Connection</code></a> object.</p>
<p>Failure to connect will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h6 id="close"><span lang='default'>close</span><span lang='csharp'>Close</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>close()</span><span lang='ruby'><a href="/realtime/types#deferrable">Deferrable</a> close &#8594; yields <a href="/realtime/connection"><code>Connection</code></a></span><span lang='java'>void close()</span><span lang='csharp'>void Close()</span></p>
</blockquote>
<p>This calls <a href="/realtime/connection#close"><span lang="default"><code>connection.close()</code></span><span lang="ruby"><code>connection.close</code></span><span lang="csharp"><code>connection.Close()</code></span></a> and causes the connection to close, entering the <code>closing</code> state. Once <code>closed</code>, the library will not attempt to re-establish the connection without an explicit call to <a href="/realtime/connection#connect"><span lang="default"><code>connect()</code></span><span lang="ruby"><code>connect</code></span><span lang="csharp"><code>Connect()</code></span></a>.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from this method.</p>
<p>On successfully closing the connection, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to this method yields a <a href="/realtime/connection"><code>Connection</code></a> object.</p>
<p>Failure to close the connection will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h6 id="stats"><span lang='default'>stats</span><span lang='csharp'>Stats</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>stats(Object options, callback(<a href="/realtime/types#error-info">ErrorInfo</a> err, <a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="#stats">Stats</a>&gt; results))</span><span lang='ruby'><a href="/realtime/types#deferrable">Deferrable</a> stats(Hash options) &#8594; yields <a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="#stats">Stats</a>&gt;</span><span lang='java'><a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="#stats">Stats</a>&gt; stats(<a href="#param">Param</a>[] options)</span><span lang='swift,objc'>stats(query: ARTStatsQuery?, callback: (<a href="/realtime/types#paginated-result">ARTPaginatedResult</a>&lt;<a href="/realtime/types#stats">ARTStats</a>&gt;?, ARTErrorInfo?) &#8594; Void) throws</span><span lang='csharp'>Task&lt;<a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="/realtime/types#stats">Stats</a>&gt;&gt; StatsAsync(StatsDataRequestQuery query)</span></p>
</blockquote>
<p>This call queries the <a href="/rest-api#stats">REST <code>/stats</code> API</a> and retrieves your application&#8217;s usage statistics. A <a href="/realtime/types#paginated-result">PaginatedResult</a> is returned, containing an array of <a href="#stats">Stats</a> for the first page of results. <a href="/realtime/types#paginated-result">PaginatedResult</a> objects are iterable providing a means to page through historical statistics. <a href="/general/statistics">See an example set of raw stats returned via the REST API</a>.</p>
<p>See <a href="/realtime/statistics">statistics</a> for more information.</p>
<h4>Parameters</h4>
<dl>
	<dt><span lang="default">options</span><span lang="objc,swift,csharp">query</span></dt>
	<dd>an optional <span lang="default">object</span><span lang="ruby">Hash</span><span lang="objc,swift"><code>ARTStatsQuery</code></span><span lang="csharp"><code>StatsDataRequestQuery</code></span><span lang="java"><a href="#param"><code>Param</code></a>[] array</span> containing the query parameters</dd>
</dl>
<dl>
	<dt><div lang="javascript,nodejs">callback</div></dt>
	<dd>is a function of the form: <code>function(err, result)</code></dd>
	<dt><div lang="ruby">&amp;block</div></dt>
	<dd>yields a <code>PaginatedResult&lt;Stats&gt;</code> array</dd>
	<dt><div lang="swift,objc">callback</div></dt>
	<dd>called with a <a href="#paginated-result">ARTPaginatedResult</a>&lt;<a href="/rest/types#stats">ARTStats</a>&gt; object or an error</dd>
</dl>
<h4><span lang="default"><code>options</code> parameters</span><span lang="objc,swift"><code>ARTStatsQuery</code> properties</span><span lang="csharp"><code>StatsDataRequestQuery</code> properties</span></h4>
<p>The following options, as defined in the <a href="/rest-api#stats">REST <code>/stats</code> API</a> endpoint, are permitted:</p>
<dl>
	<dt><span lang="default">start</span><span lang="ruby">:start</span><span lang="csharp">Start</span></dt>
	<dd><em>beginning of time</em> earliest <span lang="csharp"><code>DateTimeOffset</code> or </span><span lang="ruby"><code>Time</code> or </span>time in milliseconds since the epoch for any stats retrieved<br><i>Type: <span lang="default"><code>Long</code></span><span lang="ruby"><code>Int or @Time</code></span><span lang="csharp"><code>DateTimeOffset</code></span></i></dd>
	<dt><span lang="default">end</span><span lang="ruby">:end</span><span lang="csharp">End</span></dt>
	<dd><em>current time</em> latest <span lang="csharp"><code>DateTimeOffset</code> or </span><span lang="ruby"><code>Time</code> or </span>time in milliseconds since the epoch for any stats retrieved<br><i>Type: <span lang="default"><code>Long</code></span><span lang="ruby"><code>Int or @Time</code></span><span lang="csharp"><code>DateTimeOffset</code></span></i></dd>
	<dt><span lang="default">direction</span><span lang="ruby">:direction</span><span lang="csharp">Direction</span></dt>
	<dd><em>backwards</em> <span lang="ruby"><code>:</code></span><code>forwards</code> or <span lang="ruby"><code>:</code></span><code>backwards</code><br><i>Type: <span lang="default"><code>String</code></span><span lang="ruby"><code>Symbol</code></span><span lang="csharp"><code>Direction</code> enum</span></i></dd>
	<dt><span lang="default">limit</span><span lang="ruby">:limit</span><span lang="csharp">Limit</span></dt>
	<dd><em>100</em> maximum number of stats to retrieve up to 1,000<br><i>Type: <code>Integer</code></i></dd>
	<dt><span lang="default">unit</span><span lang="ruby">:unit</span><span lang="csharp">Unit</span></dt>
	<dd><em>minute</em> <span lang="ruby"><code>:</code></span><code>minute</code>, <span lang="ruby"><code>:</code></span><code>hour</code>, <span lang="ruby"><code>:</code></span><code>day</code> or <span lang="ruby"><code>:</code></span><code>month</code>. Based on the unit selected, the given start or end times are rounded down to the start of the relevant interval depending on the unit granularity of the query<br><i>Type: <span lang="default"><code>String</code></span><span lang="objc,swift"><a href="#stats-granularity"><code>ARTStatsGranularity</code></a></span><span lang="ruby"><code>Symbol</code></span><span lang="csharp"><code>StatsBy</code> enum</span></i></dd>
</dl>


<div lang="javascript,nodejs,,objc,swift"> <!-- start javascript,nodejs,,objc,swift language block -->
<h4>Callback result</h4>
<p>On success, <code>result</code> contains a <a href="#paginated-result"><code>PaginatedResult</code></a> encapsulating an array of <a href="/realtime/types#stats"><code>Stats</code></a> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <a href="#paginated-result"><code>next</code></a> and <a href="#paginated-result"><code>first</code></a> methods.</p>
<p>On failure to retrieve stats, <code>err</code> contains an <a href="#error-info"><code>ErrorInfo</code></a> object with an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end javascript,nodejs,,objc,swift language block -->



<div lang="java"> <!-- start java language block -->
<h4>Returns</h4>
<p>On success, the returned <a href="#paginated-result"><code>PaginatedResult</code></a> encapsulates an array of <a href="/realtime/types#stats"><code>Stats</code></a> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <a href="#paginated-result"><code>next</code></a> and <a href="#paginated-result"><code>first</code></a> methods.</p>
<p>Failure to retrieve the stats will raise an <a href="/realtime/types/#ably-exception"><code>AblyException</code></a></p>

</div> <!-- /end java language block -->



<div lang="csharp"> <!-- start csharp language block -->
<h4>Returns</h4>
<p>Returns a <code>Task&lt;PaginatedResult&gt;</code> which needs to be awaited.</p>
<p>On success, the returned <a href="#paginated-result"><code>PaginatedResult</code></a> encapsulates an array of <a href="/realtime/types#stats"><code>Stats</code></a> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <a href="#paginated-result"><code>NextAsync</code></a> and <a href="#paginated-result"><code>FirstAsync</code></a> methods.</p>
<p>Failure to retrieve the stats will raise an <a href="/realtime/types/#ably-exception"><code>AblyException</code></a></p>

</div> <!-- /end csharp language block -->



<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from the stats method.</p>
<p>On success, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to the method yields a <a href="#paginated-result">PaginatedResult</a> that encapsulates an array of <a href="/realtime/types#stats"><code>Stats</code></a> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <a href="#paginated-result"><code>next</code></a> and <a href="#paginated-result"><code>first</code></a> methods.</p>
<p>Failure to retrieve the stats will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h6 id="time"><span lang='default'>time</span><span lang='csharp'>Time</span></h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>time(callback(<a href="/realtime/types#error-info">ErrorInfo</a> err, Number time))</span><span lang='ruby'><a href="/realtime/types#deferrable">Deferrable</a> time &#8594; yields Time</span><span lang='java'>long time()</span><span lang='csharp'>Task<DateTimeOffset> TimeAsync()</span><span lang='objc,swift'>time(callback: (NSDate?, NSError?) &#8594; Void)</span></p>
</blockquote>
<p>Obtains the time from the Ably service as <span lang="ruby">a <code>Time</code> object</span><span lang="csharp">a <code>DateTimeOffset</code> object</span><span lang="default">milliseconds since epoch</span>. This may be required on clients that do not have access to a sufficiently well maintained time source and wish to issue token requests with a more accurate timestamp.</p>


<div lang="javascript,nodejs,,objc,swift"> <!-- start javascript,nodejs,,objc,swift language block -->
<h4>Callback result</h4>
<p>On success, <code>time</code> is a number containing the number of milliseconds since the epoch.</p>
<p>On failure to retrieve the Ably server time, <code>err</code> contains an <a href="#error-info"><code>ErrorInfo</code></a> object with an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end javascript,nodejs,,objc,swift language block -->



<div lang="java"> <!-- start java language block -->
<h4>Returns</h4>
<p>On success, milliseconds since the epoch is returned.</p>
<p>Failure to retrieve the Ably server time will raise an <a href="#ably-exception"><code>AblyException</code></a>.</p>

</div> <!-- /end java language block -->



<div lang="csharp"> <!-- start csharp language block -->
<h4>Returns</h4>
<p>A <code>Task&lt;DateTimeOffset&gt;</code> is returned from this methode.</p>
<p>When awaited on success it will return the server time converted to a <code>DateTimeOffset</code>.</p>
<p>Failure to retrieve the Ably server time will raise an <a href="#ably-exception"><code>AblyException</code></a>.</p>

</div> <!-- /end csharp language block -->



<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from this method.</p>
<p>On success, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to the method yields a <code>Time</code> object.</p>
<p>Failure to retrieve the Ably server time will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">Ably REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h2 id="related-types">Related types</h2>
<h3 id="client-options"><span lang='default'>ClientOptions</span><span lang='swift,objc'>ARTClientOptions</span><span lang='java'>io.ably.lib.types.ClientOptions</span><span lang='csharp'>IO.Ably.ClientOptions</span></h3>


<div lang="javascript,nodejs"> <!-- start javascript,nodejs language block -->
<p><code>ClientOptions</code> is a plain Javascript object and is used in the <code>Ably.Realtime</code> constructor&#8217;s <code>options</code> argument.  The following attributes can be defined on the object:</p>

</div> <!-- /end javascript,nodejs language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p><code>ClientOptions</code> is a Hash object and is used in the <code>Ably::Realtime</code> constructor&#8217;s <code>options</code> argument.  The following key symbol values can be added to the Hash:</p>

</div> <!-- /end ruby language block -->



<div lang="php"> <!-- start php language block -->
<p><code>ClientOptions</code> is a associative array and is used in the <code>Ably\AblyRest</code> constructor&#8217;s <code>options</code> argument.  The following named keys and values can be added to the associative array:</p>

</div> <!-- /end php language block -->



<div lang="java,objc,swift,csharp"> <!-- start java,objc,swift,csharp language block -->
<p><span lang="objc,swift"><code>ART</code></span><code>ClientOptions</code> is used in the <code>AblyRealtime</code> constructor&#8217;s <code>options</code> argument.</p>

</div> <!-- /end java,objc,swift,csharp language block -->

<h4><span lang='default'>Properties</span><span lang='java'>Members</span><span lang='ruby'>Attributes</span><span lang='python'>Keyword arguments</span></h4>
<dl>
	<dt><span lang="default">key</span><span lang="csharp">Key</span><span lang="ruby">:key</span></dt>
	<dd>The full key string, as obtained from the <a href="http://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>. Use this option if you wish to use Basic authentication, or wish to be able to issue tokens without needing to defer to a separate entity to sign token requests. Read more about <a href="/general/authentication#basic-authentication">Basic authentication</a><br><i>Type: <code>String</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">token</span><span lang="csharp">Token</span><span lang="ruby">:token</span></dt>
	<dd>An authenticated token string that is most commonly obtained from the <span lang="default">@token@&gt;</span><span lang="csharp"><code>Token</code></span> property of a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> component of a token request response. Use this option if you wish to use Token authentication. Read more about <a href="/general/authentication#token-authentication">Token authentication</a><br><i>Type: <code>String</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">tokenDetails</span><span lang="csharp">TokenDetails</span><span lang="python">token_details</span><span lang="ruby">:token_details</span></dt>
	<dd>An authenticated <a href="/realtime/types/#token-details"><code>TokenDetails</code></a> object that is most commonly obtained from of a token request response. Use this option if you wish to use Token authentication. Read more about <a href="/general/authentication#token-authentication">Token authentication</a><br><i>Type: <code>TokenDetails</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">tls</span><span lang="csharp">Tls</span><span lang="ruby">:tls</span></dt>
	<dd><em>true</em> A boolean value, indicating whether or not a TLS (&#8220;SSL&#8221;) secure connection should be used. An insecure connection cannot be used with Basic authentication ensuring private keys are compromised in transit. <a href="https://support.ably.io/solution/articles/3000045208-are-messages-sent-to-and-received-from-ably-sent-security-using-tls">Find out more about TLS</a><br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">clientId</span><span lang="csharp">ClientId</span><span lang="python">client_id</span><span lang="ruby">:client_id</span></dt>
	<dd>A client ID, used for identifying this client when publishing messages or for presence purposes. The <span lang="default"><code>clientId</code></span><span lang="ruby,python"><code>client_id</code></span><span lang="csharp"><code>ClientId</code></span> can be any non-empty string. This option is primarily intended to be used in situations where the library is instanced with a key; note that a <span lang="default"><code>clientId</code></span><span lang="ruby,python"><code>client_id</code></span><span lang="csharp"><code>ClientId</code></span> may also be implicit in a token used to instance the library; an error will be raised if a <span lang="default"><code>clientId</code></span><span lang="ruby,python"><code>client_id</code></span> specified here conflicts with the <span lang="default"><code>clientId</code></span><span lang="ruby,python"><code>client_id</code></span><span lang="csharp"><code>ClientId</code></span> implicit in the token. <a href="/how-ably-works#client-identity">Find out more about client identities</a><br><i>Type: <code>String</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">authCallback</span><span lang="csharp">AuthCallback</span><span lang="python">auth_callback</span><span lang="ruby">:auth_callback</span></dt>
	<dd>A <span lang="default">function</span><span lang="javascript,nodejs">function with the form <code>function(tokenParams, callback(err, tokenOrTokenRequest))</code></span><span lang="java"><code>TokenCallback</code> instance</span><span lang="python">callable (eg a lambda)</span><span lang="ruby">proc / lambda</span> which is called when a new token is required. The role of the callback is to either generate a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> which may then be submitted automatically by the library to the <a href="/rest-api#request-token">Ably REST API <code>requestToken</code></a>; or to provide a valid token in as a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> object. See <a href="https://jsbin.ably.io:443/ocodaf/1/edit?javascript,live">an authentication callback example</a> or <a href="/rest/authentication">our authentication documentation</a> for details of the token request format and associated API calls.<br><i>Type: <span lang="default"><code>Callable</code></span><span lang="java"><code>TokenCallback</code></span><span lang="ruby"><code>Proc</code></span><span lang="csharp"><code>Func&lt;TokenParams, Task&lt;TokenDetails&gt;&gt;</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">authUrl</span><span lang="csharp">AuthUrl</span><span lang="python">auth_url</span><span lang="ruby">:auth_url</span></dt>
	<dd>A URL that the library may use to obtain a token string (in plain text format), or a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> or <a href="/realtime/types#token-details"><code>TokenDetails</code></a> (in JSON format). For example, this can be used by a client to obtain signed token requests from an application server.<br><i>Type: <span lang="default"><code>String</code></span><span lang="csharp"><code>Uri</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">authMethod</span><span lang="csharp">AuthMethod</span><span lang="python">auth_method</span><span lang="ruby">:auth_method</span></dt>
	<dd><em><span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span></em> The HTTP verb to use for the request, either <span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span> or <span lang="default"><code>POST</code></span><span lang="ruby"><code>:post</code></span><br><i>Type: <span lang="default"><code>String</code></span><span lang="ruby"><code>Symbol</code></span><span lang="csharp"><code>HttpMethod</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">authHeaders</span><span lang="csharp">AuthHeaders</span><span lang="python">auth_headers</span><span lang="ruby">:auth_headers</span></dt>
	<dd>A set of key value pair headers to be added to any request made to the <span lang="default"><code>authUrl</code></span><span lang="csharp"><code>AuthUrl</code></span>. Useful when an application requires these to be added to validate the request or implement the response.<br><i>Type: <span lang="default"><code>Object</code></span><span lang="python"><code>Dict</code></span><span lang="ruby"><code>Hash</code></span><span lang="php"><code>Associative Array</code></span><span lang="java"><code>Param []</code></span><span lang="csharp"><code>Dictionary&lt;string, string&gt;</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">authParams</span><span lang="csharp">AuthParams</span><span lang="python">auth_params</span><span lang="ruby">:auth_params</span></dt>
	<dd>A set of key value pair params to be added to any request made to the <span lang="default"><code>authUrl</code></span><span lang="csharp"><code>AuthUrl</code></span>. When the <span lang="default"><code>authMethod</code></span><span lang="csharp"><code>AuthMethod</code></span> is <code>GET</code>, query params are added to the URL, whereas when <span lang="default"><code>authMethod</code></span><span lang="csharp"><code>AuthMethod</code></span> is <code>POST</code>, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response.<br><i>Type: <span lang="default"><code>Object</code></span><span lang="python"><code>Dict</code></span><span lang="ruby"><code>Hash</code></span><span lang="php"><code>Associative Array</code></span><span lang="java"><code>Param []</code></span><span lang="csharp"><code>Dictionary&lt;string, string&gt;</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">useTokenAuth</span><span lang="csharp">UseTokenAuth</span><span lang="python">use_token_auth</span><span lang="ruby">:use_token_auth</span></dt>
	<dd><em>false</em> When true, forces <a href="/general/authentication#token-authentication">Token authentication</a> to be used by the libary. Please note that if a <span lang="ruby,python"><code>client_id</code></span><span lang="default"><code>clientId</code></span> is not specified in the <a href="/realtime/types#client-options"><code>ClientOptions</code></a> or <a href="/realtime/types#token-params"><code>TokenParams</code></a>, then the token issued will be <a href="https://support.ably.io/solution/articles/3000038608-authenticated-and-identified-clients">anonymous</a>.<br><i>Type: <code>Boolean</code></i></dd>
</dl>


<div lang="javascript,nodejs"> <!-- start javascript,nodejs language block -->
<dl>
	<dt>log</dt>
	<dd>Parameters to control the log output of the library. The supplied value must be an object that may contain one or both of the following entries:<br />
<ul><br />
  <li><code>level</code>: a number controlling the verbosity of the output. Valid values are: 0 (no logs), 1 (errors only), 2 (errors plus connection and channel state changes), 3 (high-level debug output), and 4 (full debug output). </li><br />
  <li><code>handler</code>: a function to handle each line of log output. If <code>handler</code> is not specified, <code>console.log</code> is used.</li><br />
</ul><br />
Note that the log level and log handler have global scope in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: <code>Object</code></i></dd>
</dl>
<dl>
	<dt>transports</dt>
	<dd>An optional array of transports to use, in descending order of preference. <span lang="javascript">In the browser environment the available transports are: <code>web_socket</code>, <code>xhr</code>, <code>jsonp</code>.</span><span lang="nodejs">The transports available in the Node.js client library are: <code>web_socket</code>, <code>xhr</code>, <code>comet</code>.</span><br><i>Type: <code>String []</code></i></dd>
</dl>

</div> <!-- /end javascript,nodejs language block -->



<div lang="java"> <!-- start java language block -->
<dl>
	<dt>logLevel</dt>
	<dd><em>5</em> A number controlling the verbosity of the output from 2 (maximum, verbose) to 6 (errors only). A special value of 99 will silence all logging. Note that the <code>logLevel</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: <code>Integer</code></i></dd>
</dl>
<dl>
	<dt>logHandler</dt>
	<dd><em><code>System.out PrintStream</code></em> A <code>LogHandler</code> interface can be specified to handle each line of log output. If <code>logHandler</code> is not specified, <code>System.out</code> is used. Note that the <code>logHandler</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: PrintStream</i></dd>
</dl>

</div> <!-- /end java language block -->



<div lang="csharp"> <!-- start csharp language block -->
<p>To set the log level and custom logger sink when using the .Net library, configure the static <code>IO.Ably.Logger</code> class.</p>
<dl>
	<dt>LogLevel</dt>
	<dd><em><code>Error</code></em> This is an enum controlling the verbosity of the output from Debug (maximum) to 2 (errors only). A special value of None will silence all logging. Note that the <code>LogLevel</code> is a static variable in the library and will thus not act independently between library instances. <br><i>Type: <code>Enum</code></i></dd>
</dl>
<dl>
	<dt>LoggerSink</dt>
	<dd><em><code>IO.Ably.DefaultLoggerSink</code></em> The default ILoggerSink outputs messages to the debug console. This property allows the user to pipe the log messages to their own logging infrastructure.</dd>
</dl>

</div> <!-- /end csharp language block -->



<div lang="objc,swift"> <!-- start objc,swift language block -->
<dl>
	<dt>logLevel</dt>
	<dd><em>ARTLogLevelWarn</em> An enum controlling the verbosity of the output from <code>ARTLogLevelVerbose</code> to <code>ARTLogLevelNone</code>. A special value of 99 will silence all logging.<br><i>Type: <code>ARTLogLevel</code></i></dd>
</dl>
<dl>
	<dt>logHandler</dt>
	<dd>A <code>ARTLog</code> object can be specified to handle each line of log output. If <code>logHandler</code> is not specified, a default <code>ARTLog</code> instance is used.<br><i>Type: <code>ARTLog *</code></i></dd>
</dl>

</div> <!-- /end objc,swift language block -->



<div lang="ruby"> <!-- start ruby language block -->
<dl>
	<dt>:log_level</dt>
	<dd><em><code>:error</code></em> Log level for the standard Logger that outputs to <code>STDOUT</code>. Can be set to <code>:fatal</code>, <code>:error</code>, <code>:warn</code>, <code>:info</code>, <code>:debug</code> or <code>:none</code>. Alternatively a <a href="http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description"><code>Logger</code> severity constant</a> can be specified.<br><i>Type: <code>Symbol</code>, <a href="http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description"><code>Logger::SEVERITY</code></a></i></dd>
</dl>
<dl>
	<dt>:logger</dt>
	<dd><em><code>STDOUT Logger</code></em> A <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html">Ruby <code>Logger</code></a> compatible object to handle each line of log output. If <code>loggger</code> is not specified, <code>STDOUT</code> is used.<br><i>Type: <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html">Ruby @Logger</a></i></dd>
</dl>

</div> <!-- /end ruby language block -->



<div lang="php"> <!-- start php language block -->
<dl>
	<dt>logLevel</dt>
	<dd><em><code>Log::WARNING</code></em> A number controlling the verbosity of the output from 1 (minimum, errors only) to 4 (most verbose);<br><i>Type: <code>Integer</code></i></dd>
</dl>
<dl>
	<dt>logHandler</dt>
	<dd><em><code>console.log</code></em> A function to handle each line of log output. If handler is not specified, <code>console.log</code> is used. Note that the log level and log handler have global scope in the library and will therefore not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: <code>Function</code></i></dd>
</dl>

</div> <!-- /end php language block -->

<dl>
	<dt><span lang="default">useBinaryProtocol</span><span lang="csharp">UseBinaryProtocol</span><span lang="python">use_binary_protocol</span><span lang="ruby">:use_binary_protocol</span></dt>
	<dd><em>true</em> If set to false, will forcibly disable the binary protocol. <span lang="default">The binary protocol is used by default unless it is</span><span lang="swift,objc,php">Note: The binary protocol is currently</span> not supported <span lang="swift">in Swift</span><span lang="obj-c">in Objective-C</span><span lang="php">in PHP</span>. Find out more about the <a href="https://support.ably.io/solution/articles/3000047365-do-you-binary-encode-your-messages-for-greater-efficiency">benefits of binary encoding</a><br><i>Type: <code>Boolean</code></i></dd>
	<dt><span lang="default">queueMessages</span><span lang="csharp">QueueMessages</span><span lang="ruby">:queue_messages</span></dt>
	<dd><em>true</em> If false, this disables the default behaviour whereby the library queues messages on a connection in the disconnected or connecting states. The default behaviour allows applications to submit messages immediately upon instancing the library without having to wait for the connection to be established. Applications may use this option to disable queuing if they wish to have application-level control over the queueing under those conditions<br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">echoMessages</span><span lang="csharp">EchoMessages</span><span lang="ruby">:echo_messages</span></dt>
	<dd><em>true</em> If false, prevents messages originating from this connection being echoed back on the same connection<br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">autoConnect</span><span lang="csharp">AutoConnect</span><span lang="ruby">:auto_connect</span></dt>
	<dd><em>true</em> By default as soon as the client library is instanced it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when require using the <a href="/realtime/usage/#connect"><code>connect</code></a> method<br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><div lang="javascript">recover</div></dt>
	<dd>This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the Realtime library. This might typically be used by clients of the browser library to ensure connection state can be preserved when the user refreshes the page. A recovery key string can be explicitly provided, or alternatively if a callback function is provided, the client library will automatically persist the recovery key between page reloads and call the callback when the connection is recoverable. The callback is then responsible for confirming whether the connection should be recovered or not. See <a href="/realtime/connection/#connection-state-recovery">connection state recovery</a> for further information<br><i>Type: <code>String</code>, <code>Callable</code></i></dd>
</dl>
<dl>
	<dt><div lang="javascript">closeOnUnload</div></dt>
	<dd><em>false</em> When true, the client library will automatically send a close request to Ably whenever the <code>window beforeunload</code> event fires. By enabling this option, the close request sent to Ably ensures the connection state will not be retained and all channels associated with the channel will be detached. This is commonly used by developers who want presence leave events to fire immediately i.e. if a user navigates to another page or closes their browser, then enabling this option will result in the presence member leaving immediately. Without this option or an explicit call to the <a href="/realtime/connection#close"><code>close</code></a> method of the <a href="/realtime/connection"><code>Connection object</code></a>, Ably expects that the abruptly disconnected connection could later be recovered and therefore does not immediately remove the user from presence. Instead, to avoid &#8220;twitchy&#8221; presence behaviour an abruptly disconnected client is removed from channels in which they are present after 15 seconds, and the connection state is retained for two minutes<br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><div lang="java,ruby,nodejs,objc,swift,csharp"><span lang="default">recover</span><span lang="csharp">Recover</span><span lang="ruby">:recover</span></div></dt>
	<dd>This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the library by providing that connection&#8217;s <span lang="default"><a href="/realtime/connection#recovery-key"><code>recoveryKey</code></a></span><span lang="ruby"><a href="/realtime/connection#recovery-key"><code>recovery_key</code></a></span>. This might typically be used by clients of an app to ensure connection state can be preserved following a reload. See <a href="/realtime/connection/#connection-state-recovery">connection state recovery</a> for further information and example code<br><i>Type: <code>String</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">queryTime</span><span lang="csharp">QueryTime</span><span lang="ruby">:query_time</span></dt>
	<dd><em>false</em> If true, the library will query the Ably servers for the current time instead of relying on a locally-available time of day<br><i>Type: <code>Boolean</code></i></dd>
</dl>
<dl>
	<dt><span lang="default">defaultTokenParams</span><span lang="csharp">DefaultTokenParams</span><span lang="ruby">:default_token_params</span></dt>
	<dd>When a <a href="/realtime/types#token-params">TokenParams</a> object is provided, it will override the client library defaults when issuing new tokens or token requests<br><i>Type: <a href="/realtime/types#token-params"><code>TokenParams</code></a></i></dd>
</dl>
<dl>
	<dt><span lang="default">disconnectedRetryTimeout</span><span lang="csharp">DisconnectedRetryTimeout</span><span lang="ruby">:disconnected_retry_timeout</span></dt>
	<dd><em><span lang="default">15,000ms</span><span lang="ruby">15s</span></em> When the connection enters the <code>DISCONNECTED</code> state, after this delay <span lang="default">in milliseconds</span><span lang="ruby">in seconds</span><span lang="objc,swift">as a <code>NSTimeInterval</code></span>, if the state is still <code>DISCONNECTED</code>, the client library will attempt to reconnect automatically<br><i>Type: <span lang="default"><code>Integer</code></span><span lang="objc,swift"><code>NSTimeInterval</code></span></i></dd>
</dl>
<dl>
	<dt><span lang="default">suspendedRetryTimeout</span><span lang="csharp">SuspendedRetryTimoeut</span><span lang="ruby">:suspended_retry_timeout</span></dt>
	<dd><em><span lang="default">30,000ms</span><span lang="ruby">30s</span></em> When the connection enters the <code>SUSPENDED</code> state, after this delay <span lang="default">in milliseconds</span><span lang="ruby">in seconds</span><span lang="objc,swift">as a <code>NSTimeInterval</code></span>, if the state is still <code>SUSPENDED</code>, the client library will attempt to reconnect automatically<br><i>Type: <span lang="default"><code>Integer</code></span><span lang="objc,swift"><code>NSTimeInterval</code></span></i></dd>
</dl>
<h3 id="stats-type"><span lang='default'>Stats object</span><span lang='swift,objc'>ARTStats</span><span lang='java'>io.ably.lib.types.Stats</span><span lang='ruby'>Ably::Models::Stats</span><span lang='csharp'>IO.Ably.Stats</span></h3>
<p>A <code>Stats</code> object represents a application statistic for the specified interval and time period. Ably aggregates statistics globally for all accounts and applications, and makes these available both through our <a href="/realtime/statistics">statistics API</a> as well as your <a href="https://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>.</p>
<p>Please note that most attributes of the <code>Stats</code> type below contain references to further stats types. This documentation is not exhaustive for all stats stypes, and as such, links to the stats types below will take you to the <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats">Ruby library stats documentation</a> which contains exhaustive stats documentation. Ruby and Python however uses <code>under_score</code> case instead of the default <code>camelCase</code> in most languages, so please bear that in mind.</p>
<h4><span lang='default'>Properties</span><span lang='java'>Members</span><span lang='ruby'>Attributes</span><span lang='python'>Keyword arguments</span></h4>
<dl>
	<dt><span lang="default">all</span><span lang="csharp">All</span></dt>
	<dd>aggregate count of both <code>inbound</code> and <code>outbound</code> message stats<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes"><code>MessageTypes</code></a></i></dd>
	<dt><span lang="default">apiRequests</span><span lang="ruby,python">api_requests</span><span lang="csharp">ApiRequests</span></dt>
	<dd>breakdown of API requests received via the Ably REST API<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount">RequestCount</a></i></dd>
	<dt><span lang="default">channels</span><span lang="csharp">Channels</span></dt>
	<dd>breakdown of channel related stats such as min, mean and peak channels<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/ResourceCount"><code>ResourceCount</code></a></i></dd>
	<dt><span lang="default">connections</span><span lang="csharp">Connections</span></dt>
	<dd>breakdown of connection related stats such as min, mean and peak channels for TLS and non-TLS connections<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/ConnectionTypes"><code>ConnectionTypes</code></a></i></dd>
	<dt><span lang="default">inbound</span><span lang="csharp">Inbound</span></dt>
	<dd>statistics such as count and data for all inbound messages received over REST and Realtime connection, broken down by normal channel messages or presence messages<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic"><code>MessageTraffic</code></a></i></dd>
	<dt><div lang="ruby,python,csharp"><span lang="default">interval_granularity</span><span lang="csharp">IntervalGranularity</span></div></dt>
	<dd>A <span lang="ruby"><a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant"><code>GRANULARITY</code></a> constant</span><span lang="python">value</span><span lang="csharp"><code>Enum</code></span> representing the granularity (interval) of this statistic such as <span lang="ruby"><code>:minute</code>, <code>:hour</code>, <code>:day</code>, <code>:month</code></span><span lang="python"><code>'minute'</code>, <code>'hour'</code>, <code>'day'</code>, <code>'month'</code></span><span lang="csharp"><code>Minute</code>, <code>Hour</code>, <code>Day</code>, <code>Month</code></span>.<br><i>Type: <span lang="ruby"><a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats#GRANULARITY-constant"><code>Stats::GRANULARITY</code></a></span><span lang="python"><code>String</code></span><span lang="csharp"><code>StatsIntervalGranularity enum</code></span></i></dd>
	<dt><span lang="default">intervalId</span><span lang="ruby,python">interval_id</span><span lang="csharp">IntervalId</span></dt>
	<dd>the interval ID provides both the time from which the interval starts as well as the length of time that this statistic covers i.e. the period of time which the stats are aggregated for. For example, an interval ID value of &#8220;2016-03-01:10:02&#8221; represents a single minute interval for the UTC time presented in the string. However, an interval ID of &#8220;2016-03&#8221; represents a month interval for the entire month of March 2016 based on UTC time.<br><i>Type: <code>String</code></i></dd>
	<dt><div lang="ruby,python,csharp"><span lang="default">interval_time</span><span lang="csharp">IntervalTime</span></div></dt>
	<dd>A <span lang="ruby"><code>Time</code></span><span lang="python"><code>DateTime</code></span><span lang="csharp"><code>DateTimeOffset</code></span> object representing the start of the interval<br><i>Type: <span lang="ruby"><code>Time</code></span><span lang="python"><code>DateTime</code></span><span lang="csharp"><code>DateTimeOffset</code></span></i></dd>
	<dt><span lang="default">outbound</span><span lang="csharp">Outbound</span></dt>
	<dd>statistics such as count and data for all oubound messages retrieved via REST history requests, received over Realtime connections, or pushed with WebHooks, broken down by normal channel messages or presence messages<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTraffic"><code>MessageTraffic</code></a></i></dd>
	<dt><span lang="default">persisted</span><span lang="csharp">Persisted</span></dt>
	<dd>messages persisted and later retrieved via the <a href="/realtime/history">history API</a><br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/MessageTypes"><code>MessageTypes</code></a></i></dd>
	<dt><span lang="default">tokenRequests</span><span lang="ruby,python">token_requests</span><span lang="csharp">TokenRequests</span></dt>
	<dd>breakdown of Token requests received via the Ably REST API.<br><i>Type: <a href="http://www.rubydoc.info/gems/ably/Ably/Models/Stats/RequestCount"><code>RequestCount</code></a></i></dd>
</dl>
<h3 id="stats-granularity"><span lang='objc,swift'>ARTStatsGranularity</span></h3>


<div lang="swift,objc"> <!-- start swift,objc language block -->
<p><code>ARTStatsGranularity</code> is an enum specifying the granularity of a <a href="/rest/statistics#stats-type"><code>ARTStats interval</code></a>.</p>
<pre lang="objc"><code lang="objc">typedef NS_ENUM(NSUInteger, ARTStatsGranularity) {
    ARTStatsGranularityMinute,
    ARTStatsGranularityHour,
    ARTStatsGranularityDay,
    ARTStatsGranularityMonth
};</code></pre>
<pre lang="swift"><code lang="swift">enum ARTStatsGranularity : UInt {
    case Minute
    case Hour
    case Day
    case Month
}</code></pre>

</div> <!-- /end swift,objc language block -->



<div lang="csharp"> <!-- start csharp language block -->
<p><code>StatsIntervalGranularity</code> is an enum specifying the granularity of a <a href="/rest/statistics#stats-type"><code>Stats interval</code></a>.</p>
<pre lang="csharp"><code lang="csharp">public enum StatsGranularity
{
    Minute,
    Hour,
    Day,
    Month
}</code></pre>

</div> <!-- /end csharp language block -->

<h3 id="param"><span lang='java'>io.ably.lib.types.Param</span></h3>


<div lang="java"> <!-- start java language block -->
<p><code>Param</code> is a type encapsulating a key/value pair. This type is used frequently in method parameters allowing key/value pairs to be used more flexible, see <a href="/realtime/history#channel-history"><code>Channel#history</code></a> for an example.</p>
<p>Please note that <code>key</code> and <code>value</code> attributes are always strings. If an <code>Integer</code> or other value type is expected, then you must coerce that type into a <code>String</code>.</p>
<h4><span lang='java'>Members</span></h4>
<dl>
	<dt>key</dt>
	<dd>The key value<br><i>Type: <code>String</code></i></dd>
	<dt>value</dt>
	<dd>The value associated with the <code>key</code><br><i>Type: <code>String</code></i></dd>
</dl>

</div> <!-- /end java language block -->


    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/images/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/how-ably-works/'>How Ably works</a></li>
</ul>
  <h2><a href="/realtime/">Realtime client lib</a></h2>
<ul>
<li class='selected'><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/encryption/'>Encryption</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
<li class=''><a href='/realtime/types/'>Types</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Using the REST library</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/types/'>Types</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2>General</h2>
<ul>
<li class=''><a href='/general/authentication/'>Authentication</a></li>
<li class=''><a href='/general/channel-rules-namespaces/'>Channel Rules and Namespaces</a></li>
<li class=''><a href='/general/push-notifications/'>Mobile push notifications</a></li>
<li class=''><a href='/general/queues/'>Message Queues</a></li>
<li class=''><a href='/general/webhooks/'>Receiving WebHooks</a></li>
<li class=''><a href='/general/statistics/'>Application Statistics</a></li>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/features/'>Features spec</a></li>
<li class=''><a href='/client-lib-development-guide/feature-prioritisation/'>Feature prioritisation</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/test-api/'>Sandbox Test API</a></li>
<li class=''><a href='/client-lib-development-guide/encryption/'>Encryption</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
<li class=''><a href='/code-index/'>Code Examples List</a></li>
</ul>
  <ul>
<li><a href="https://www.ably.io">Visit Ably.io</a></li>
</ul>
</div>

</body>
</html>
